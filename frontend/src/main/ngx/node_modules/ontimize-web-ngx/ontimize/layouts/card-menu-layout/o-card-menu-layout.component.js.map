{"version":3,"file":"o-card-menu-layout.component.js","sourceRoot":"","sources":["../../../../tmp/ontimize/layouts/card-menu-layout/o-card-menu-layout.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { CommonModule } from '@angular/common';\nimport { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, Injector, NgModule, OnDestroy, ViewEncapsulation } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { OCardMenuItemModule } from '../../components/card-menu-item/o-card-menu-item.component';\nimport { AppMenuService, OTranslateService } from '../../services';\nimport { MenuGroup, MenuRootItem } from '../../services/app-menu.service';\nimport { OSharedModule } from '../../shared/shared.module';\n\nexport const DEFAULT_INPUTS_O_MENU_LAYOUT = [\n  'parentMenuId : parent-menu-id'\n];\n\nexport const DEFAULT_OUTPUTS_O_MENU_LAYOUT = [\n];\n\n@Component({\n  moduleId: module.id,\n  selector: 'o-card-menu-layout',\n  template: `\n    <div fxLayout=\"row wrap\" fxLayout.lt-md=\"column\" fxLayoutAlign=\"space-around center\" fxLayoutGap.gt-sm=\"8px\" fxFill>\n      <ng-container *ngFor=\"let item of cardItems\">\n        <o-card-menu-item *ngIf=\"item['show-in-card-menu'] !== false\" button-text=\"CARD_MENU_LAYOUT.BUTTON_TEXT\" [route]=\"item.route\"\n          [title]=\"item.name\" [tooltip]=\"item.tooltip\" [icon]=\"item.icon\" [image]=\"item.image\" [detail-component]=\"item.component\"\n          [detail-component-inputs]=\"item['component-inputs']\" [ngClass]=\"item.class\">\n        </o-card-menu-item>\n      </ng-container>\n      <ng-content select=\"o-card-menu-item\"></ng-content>\n    </div>\n  `,\n  styles: [`\n    .o-menu-layout{display:block;height:100%;width:100%}.o-menu-layout .o-card-menu-item{height:45%;margin:16px 0;max-width:290px;min-height:180px;min-width:290px}.o-menu-layout .o-card-menu-item.compact{height:30%;max-height:250px}\n  `],\n  inputs: DEFAULT_INPUTS_O_MENU_LAYOUT,\n  outputs: DEFAULT_OUTPUTS_O_MENU_LAYOUT,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class.o-menu-layout]': 'true'\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class OCardMenuLayoutComponent implements AfterViewInit, OnDestroy {\n\n  public static DEFAULT_INPUTS_O_MENU_LAYOUT = DEFAULT_INPUTS_O_MENU_LAYOUT;\n  public static DEFAULT_OUTPUTS_O_MENU_LAYOUT = DEFAULT_OUTPUTS_O_MENU_LAYOUT;\n\n  protected translateService: OTranslateService;\n  protected translateServiceSubscription: Subscription;\n  protected appMenuService: AppMenuService;\n  protected menuRoots: MenuRootItem[];\n  protected cardItemsArray: MenuRootItem[];\n  protected parentMenuId: string;\n\n  constructor(\n    private injector: Injector,\n    private cd: ChangeDetectorRef\n  ) {\n    this.translateService = this.injector.get(OTranslateService);\n    this.appMenuService = this.injector.get(AppMenuService);\n    this.menuRoots = this.appMenuService.getMenuRoots();\n\n    this.translateServiceSubscription = this.translateService.onLanguageChanged.subscribe(() => {\n      this.cd.detectChanges();\n    });\n  }\n\n  public ngAfterViewInit(): void {\n    this.setCardMenuItems();\n  }\n\n  public ngOnDestroy(): void {\n    if (this.translateServiceSubscription) {\n      this.translateServiceSubscription.unsubscribe();\n    }\n  }\n\n  public setCardMenuItems(): void {\n    let cardItemsAux = [];\n    if (!this.parentMenuId) {\n      cardItemsAux = this.menuRoots.filter(item => !this.appMenuService.isMenuGroup(item));\n    } else {\n      cardItemsAux = this.getItemsFilteredByParentId(this.menuRoots);\n    }\n\n    this.cardItems = cardItemsAux;\n  }\n\n  get cardItems(): MenuRootItem[] {\n    return this.cardItemsArray;\n  }\n\n  set cardItems(val: MenuRootItem[]) {\n    this.cardItemsArray = val;\n    this.cd.detectChanges();\n  }\n\n  protected getItemsFilteredByParentId(array: MenuRootItem[]): MenuRootItem[] {\n    let result: MenuRootItem[];\n    const groups = array.filter(item => this.appMenuService.isMenuGroup(item));\n\n    for (let i = 0, len = groups.length; i < len; i++) {\n      const menuGroup = (groups[i] as MenuGroup);\n      if (menuGroup.id === this.parentMenuId) {\n        result = menuGroup.items;\n        break;\n      } else {\n        result = this.getItemsFilteredByParentId(menuGroup.items);\n      }\n    }\n    return result;\n  }\n\n}\n\n@NgModule({\n  declarations: [OCardMenuLayoutComponent],\n  imports: [CommonModule, OCardMenuItemModule, OSharedModule],\n  exports: [OCardMenuLayoutComponent]\n})\nexport class OCardMenuLayoutModule { }\n"]}