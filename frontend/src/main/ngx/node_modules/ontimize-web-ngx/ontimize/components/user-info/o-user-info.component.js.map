{"version":3,"file":"o-user-info.component.js","sourceRoot":"","sources":["../../../../tmp/ontimize/components/user-info/o-user-info.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, ElementRef, Injector, NgModule, OnDestroy, ViewEncapsulation } from '@angular/core';\nimport { Router, RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { Subscription } from 'rxjs';\n\nimport { OSharedModule } from '../../shared';\nimport { DialogService, LoginService, OUserInfoService, UserInfo } from '../../services';\n\nexport const DEFAULT_INPUTS_O_USER_INFO = [];\n\nexport const DEFAULT_OUTPUTS_O_USER_INFO = [];\n\n@Component({\n  moduleId: module.id,\n  selector: 'o-user-info',\n  inputs: DEFAULT_INPUTS_O_USER_INFO,\n  outputs: DEFAULT_OUTPUTS_O_USER_INFO,\n  template: `\n    <div class=\"o-user-info-container\" fxLayout=\"row\" fxLayoutAlign=\"center\">\n      <ng-container *ngIf=\"existsUserInfo\">\n        <div class=\"o-user-info-wrapper\" fxLayout=\"row\" fxLayoutAlign=\"center center\">\n          <div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"o-user-info-avatar-wrapper\">\n            <img [src]=\"avatar\" *ngIf=\"avatar\" />\n          </div>\n          <span class=\"o-user-info-username\" *ngIf=\"username\"> {{ username }}</span>\n          <mat-icon [matMenuTriggerFor]=\"menu\" svgIcon=\"ontimize:keyboard_arrow_down\"></mat-icon>\n        </div>\n        <mat-menu #menu=\"matMenu\" yPosition=\"below\">\n          <button type=\"button\" mat-menu-item (click)=\"onSettingsClick()\">\n            <mat-icon svgIcon=\"ontimize:settings\"></mat-icon>\n            <span>{{ 'SETTINGS' | oTranslate }}</span>\n          </button>\n          <button type=\"button\" mat-menu-item (click)=\"onLogoutClick()\">\n            <mat-icon svgIcon=\"ontimize:power_settings_new\"></mat-icon>\n            <span>{{ 'LOGOUT' | oTranslate }}</span>\n          </button>\n        </mat-menu>\n      </ng-container>\n    </div>\n  `,\n  styles: [`\n    .o-user-info .o-user-info-container{cursor:pointer;height:100%}.o-user-info .o-user-info-avatar-wrapper{width:30px;height:30px;overflow:hidden;border-radius:100%}.o-user-info .o-user-info-avatar-wrapper img{max-width:100%;height:auto}.o-user-info .o-user-info-username{padding-left:6px}.o-user-info mat-icon{padding-left:4px;font-size:16px;line-height:26px}\n  `],\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class.o-user-info]': 'true'\n  }\n})\nexport class OUserInfoComponent implements OnDestroy {\n\n  public static DEFAULT_INPUTS_O_USER_INFO = DEFAULT_INPUTS_O_USER_INFO;\n  public static DEFAULT_OUTPUTS_O_USER_INFO = DEFAULT_OUTPUTS_O_USER_INFO;\n\n  protected dialogService: DialogService;\n  protected loginService: LoginService;\n  protected oUserInfoService: OUserInfoService;\n\n  userInfoSubscription: Subscription;\n  protected userInfo: UserInfo;\n\n  constructor(\n    protected elRef: ElementRef,\n    protected injector: Injector,\n    protected router: Router\n  ) {\n    this.dialogService = this.injector.get(DialogService);\n    this.loginService = this.injector.get(LoginService);\n    this.oUserInfoService = this.injector.get(OUserInfoService);\n\n    this.userInfo = this.oUserInfoService.getUserInfo();\n    this.userInfoSubscription = this.oUserInfoService.getUserInfoObservable().subscribe(res => {\n      this.userInfo = res;\n    });\n  }\n\n  ngOnDestroy() {\n    this.userInfoSubscription.unsubscribe();\n  }\n\n  onLogoutClick() {\n    this.loginService.logoutWithConfirmationAndRedirect();\n  }\n\n  onSettingsClick() {\n    this.router.navigate(['main/settings']);\n  }\n\n  get existsUserInfo(): boolean {\n    return this.userInfo !== undefined;\n  }\n\n  get avatar(): string {\n    return this.userInfo ? this.userInfo.avatar : undefined;\n  }\n\n  get username(): string {\n    return this.userInfo ? this.userInfo.username : undefined;\n  }\n\n}\n\n@NgModule({\n  declarations: [OUserInfoComponent],\n  imports: [CommonModule, OSharedModule, RouterModule],\n  exports: [OUserInfoComponent]\n})\nexport class OUserInfoModule { }\n"]}