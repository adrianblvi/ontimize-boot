{"version":3,"file":"o-form-can-deactivate.guard.js","sourceRoot":"","sources":["../../../../../tmp/ontimize/components/form/guards/o-form-can-deactivate.guard.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAG3C,OAAO,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAC;AAOvC;IAAA;IAkBA,CAAC;IAdC,8CAAa,GAAb,UAAc,SAAiC,EAAE,IAA4B,EAAE,KAA0B,EAAE,MAA2B;QACpI,IAAM,iBAAiB,GAAG,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;QAClD,IAAI,iBAAiB,CAAC,cAAc,CAAC,KAAK,CAAC,qBAAqB,CAAC,EAAE;YACjE,OAAO,IAAI,CAAC;SACb;QACD,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,OAAO,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;SACnC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,wCAAO,GAAP,UAAQ,IAAoB;QAC1B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACpB,CAAC;;gBAjBF,UAAU;;IAkBX,6BAAC;CAAA,AAlBD,IAkBC;SAjBY,sBAAsB","sourcesContent":["import { Injectable } from '@angular/core';\nimport { CanDeactivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { Codes } from '../../../utils';\nimport { OFormComponent } from '../o-form.component';\n\nexport interface CanComponentDeactivate {\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\n}\n\n@Injectable()\nexport class CanDeactivateFormGuard implements CanDeactivate<CanComponentDeactivate> {\n  oForm: OFormComponent;\n\n  canDeactivate(component: CanComponentDeactivate, curr: ActivatedRouteSnapshot, state: RouterStateSnapshot, future: RouterStateSnapshot) {\n    const futureQueryParams = future.root.queryParams;\n    if (futureQueryParams.hasOwnProperty(Codes.IGNORE_CAN_DEACTIVATE)) {\n      return true;\n    }\n    if (this.oForm) {\n      return this.oForm.canDeactivate();\n    }\n    return true;\n  }\n\n  setForm(form: OFormComponent) {\n    this.oForm = form;\n  }\n}\n\n"]}