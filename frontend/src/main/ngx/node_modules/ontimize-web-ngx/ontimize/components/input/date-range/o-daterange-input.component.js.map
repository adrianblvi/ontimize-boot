{"version":3,"file":"o-daterange-input.component.js","sourceRoot":"","sources":["../../../../../tmp/ontimize/components/input/date-range/o-daterange-input.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { CommonModule } from '@angular/common';\nimport { Component, ElementRef, forwardRef, Inject, Injector, NgModule, OnDestroy, OnInit, Optional, ViewChild } from '@angular/core';\nimport { FormControl, ValidationErrors, ValidatorFn } from '@angular/forms';\nimport * as _moment from 'moment';\nimport { InputConverter } from '../../../decorators/input-converter';\nimport { MomentService } from '../../../services/moment.service';\nimport { OTranslateService } from '../../../services/translate/o-translate.service';\nimport { OSharedModule } from '../../../shared';\nimport { Util } from '../../../util/util';\nimport { OFormComponent } from '../../form/o-form.component';\nimport { IFormValueOptions } from '../../form/OFormValue';\nimport { OFormDataComponent, OValueChangeEvent } from '../../o-form-data-component.class';\nimport { DEFAULT_INPUTS_O_DATE_INPUT } from '../date-input/o-date-input.component';\nimport { DEFAULT_OUTPUTS_O_TEXT_INPUT } from '../text-input/o-text-input.component';\nimport { ODaterangepickerDirective } from './o-daterange-input.directive';\nimport { DaterangepickerComponent } from './o-daterange-picker.component';\n\nexport const DEFAULT_OUTPUTS_O_DATERANGE_INPUT = [\n  ...DEFAULT_OUTPUTS_O_TEXT_INPUT\n];\n\nexport const DEFAULT_INPUTS_O_DATERANGE_INPUT = [\n  'separator',\n  'showWeekNumbers:show-week-numbers',\n  'showRanges:show-ranges',\n  'olocale:locale',\n  'startKey',\n  'endKey',\n  ...DEFAULT_INPUTS_O_DATE_INPUT\n];\n\n\nconst moment = _moment;\n@Component({\n  moduleId: module.id,\n  selector: 'o-daterange-input',\n  template: `\n    <div fxLayout=\"row\" fxLayoutAlign=\"space-between center\" [formGroup]=\"getFormGroup()\" [matTooltip]=\"tooltip\"\n      [matTooltipClass]=\"tooltipClass\" [matTooltipPosition]=\"tooltipPosition\" [matTooltipShowDelay]=\"tooltipShowDelay\"\n      [matTooltipHideDelay]=\"tooltipHideDelay\">\n\n      <mat-form-field [appearance]=\"appearance\" [floatLabel]=\"floatLabel\" [hideRequiredMarker]=\"hideRequiredMarker\"\n        [class.custom-width]=\"hasCustomWidth\" class=\"icon-field\" fxFlexFill>\n        <mat-label *ngIf=\"labelVisible\">{{ olabel | oTranslate }}</mat-label>\n        <input #matInputRef matInput type=\"text\" o-daterange-input [id]=\"getAttribute()\" [formControlName]=\"getAttribute()\"\n          [required]=\"isRequired\" [placeholder]=\"placeHolder\" [readonly]=\"isReadOnly || !textInputEnabled\"\n          showDropdowns=\"true\" showCancel=\"true\" [showRanges]=\"showRanges\" \n          (datesUpdated)=\"datesUpdated($event)\" [oTouchUi]=\"oTouchUi\" [minDate]=\"oMinDate\" [maxDate]=\"oMaxDate\"\n          (focus)=\"innerOnFocus($event)\" (blur)=\"innerOnBlur($event)\" (change)=\"onChangeEvent($event)\" [locale]=\"localeOptions\"   [separator]=\"separator\"\n          [startKey]=\"startKey\" [endKey]=\"endKey\" [showWeekNumbers]=\"showWeekNumbers\">\n        <button type=\"button\" matSuffix mat-icon-button (click)=\"openPicker()\" [disabled]=\"isReadOnly || !enabled\">\n          <mat-icon>today</mat-icon>\n        </button>\n\n        <button type=\"button\" *ngIf=\"showClearButton\" matSuffix mat-icon-button (click)=\"onClickClearValue($event)\"\n          [disabled]=\"isReadOnly || !enabled\">\n          <mat-icon svgIcon=\"ontimize:close\"></mat-icon>\n        </button>\n\n        <mat-error *ngIf=\"hasError('required')\" text=\"{{ 'FORM_VALIDATION.REQUIRED' | oTranslate }}\"></mat-error>\n        <mat-error *ngIf=\"hasError('dateRange')\" text=\"{{ 'FORM_VALIDATION.DATERANGE_INVALID' | oTranslate }}\"></mat-error>\n        <mat-error *ngIf=\"hasError('dateRangeParse')\"\n          text=\"{{ 'FORM_VALIDATION.DATE_PARSE' | oTranslate }} : {{ getErrorValue('dateRangeParse', 'format') }}\">\n        </mat-error>\n        <mat-error *ngIf=\"hasError('dateRangeMin')\"\n          text=\"{{ 'FORM_VALIDATION.DATERANGE_MIN' | oTranslate }} : {{ getErrorValue('dateRangeMin', 'dateMin') }}\">\n        </mat-error>\n        <mat-error *ngIf=\"hasError('dateRangeMax')\"\n          text=\"{{ 'FORM_VALIDATION.DATERANGE_MAX' | oTranslate }} : {{ getErrorValue('dateRangeMax', 'dateMax') }}\">\n        </mat-error>\n        <mat-error *ngFor=\"let oError of getActiveOErrors()\" text=\"{{ oError.text | oTranslate }}\"></mat-error>\n      </mat-form-field>\n    </div>\n  `,\n  styles: ['./o-daterange-input.component.scss'],\n  outputs: DEFAULT_OUTPUTS_O_DATERANGE_INPUT,\n  inputs: DEFAULT_INPUTS_O_DATERANGE_INPUT\n})\nexport class ODateRangeInputComponent extends OFormDataComponent implements OnDestroy, OnInit {\n\n  @ViewChild(ODaterangepickerDirective) pickerDirective: ODaterangepickerDirective;\n  picker: DaterangepickerComponent;\n\n  @ViewChild('matInputRef')\n  private matInputRef: ElementRef;\n\n  @InputConverter()\n  public textInputEnabled: boolean = true;\n\n  @InputConverter()\n  public showWeekNumbers: boolean = false;\n\n  @InputConverter()\n  public oTouchUi: boolean = false;\n\n  @InputConverter()\n  public showRanges: boolean = false;\n\n  protected _oMinDate: _moment.Moment;\n  get oMinDate() {\n    return this._oMinDate;\n  }\n  set oMinDate(value) {\n    this._oMinDate = moment(value, this.oformat);\n  }\n\n  protected _oMaxDate: _moment.Moment;\n  get oMaxDate() {\n    return this._oMaxDate;\n  }\n  set oMaxDate(value) {\n    this._oMaxDate = moment(value, this.oformat);\n  }\n\n  protected _startKey: string = 'startDate';\n  get startKey() {\n    return this._startKey;\n  }\n  set startKey(value) {\n    this._startKey = value;\n  }\n\n  protected _endKey: string = 'endDate';\n  get endKey() {\n    return this._endKey;\n  }\n  set endKey(value) {\n    this._endKey = value;\n  }\n\n  protected _separator = ' - ';\n  get separator() {\n    return this._separator;\n  }\n\n  set separator(value) {\n    this._separator = value;\n    if (this.getFormControl() && this.getFormControl().value) {\n      this.updateElement();\n    }\n  }\n\n  get showClearButton(): boolean {\n    return this.clearButton && !this.isReadOnly && this.enabled && this.matInputRef.nativeElement.value;\n  }\n\n  get localeOptions() {\n    return this._localeOptions;\n  }\n\n  public oformat: string = 'L';\n  protected _localeOptions: any;\n  protected olocale: string;\n\n  private momentSrv: MomentService;\n  private oTranslate: OTranslateService;\n\n\n  constructor(\n    @Optional() @Inject(forwardRef(() => OFormComponent)) form: OFormComponent,\n    elRef: ElementRef,\n    injector: Injector\n  ) {\n    super(form, elRef, injector);\n    this.oTranslate = this.injector.get(OTranslateService);\n    this.momentSrv = this.injector.get(MomentService);\n    this._localeOptions = {\n      direction: 'ltr',\n      separator: ' - ',\n      weekLabel: this.oTranslate.get('DATERANGE.W'),\n      applyLabel: this.oTranslate.get('DATERANGE.APPLYLABEL'),\n      cancelLabel: this.oTranslate.get('CANCEL'),\n      customRangeLabel: 'Custom range',\n      daysOfWeek: moment.weekdaysMin(),\n      monthNames: moment.monthsShort(),\n      firstDay: moment.localeData().firstDayOfWeek(),\n      format: 'L'\n    };\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    if (!this.olocale) {\n      this.olocale = this.momentSrv.getLocale();\n      moment.locale(this.olocale);\n\n    }\n    if (this.oformat) {\n      this._localeOptions.format = this.oformat;\n    }\n  }\n\n\n  public openPicker() {\n    this.pickerDirective.open();\n  }\n\n  public onChangeEvent(event: any): void {\n    let objectValue;\n    if (event instanceof Event) {\n      let value = (event.target as HTMLInputElement).value;\n      if (value !== '') {\n        objectValue = this.getDateRangeToString(value);\n      }\n    } else {\n      objectValue = event;\n    }\n\n    this.setValue(objectValue, {\n      changeType: OValueChangeEvent.USER_CHANGE,\n      emitEvent: false,\n      emitModelToViewChange: false\n    });\n\n  }\n\n  public setValue(val: any, options: IFormValueOptions = {}, setDirty: boolean = false) {\n    super.setValue(val, options, setDirty);\n    this.updateElement();\n  }\n\n  public onClickClearValue(e: Event): void {\n    super.onClickClearValue(e);\n    this.pickerDirective.value = undefined;\n    this.pickerDirective.datesUpdated.emit(undefined);\n  }\n\n  datesUpdated(range) {\n\n    this.pickerDirective.close();\n    this.setValue(range,\n      {\n        changeType: OValueChangeEvent.USER_CHANGE,\n        emitEvent: false,\n        emitModelToViewChange: false\n      });\n  }\n\n  public setData(newValue: any): void {\n    super.setData(newValue);\n    this.pickerDirective.datesUpdated.emit(newValue);\n    this.updateElement();\n  }\n\n  updateElement() {\n    let chosenLabel = (!this.isObjectDataRangeNull(this.value)) ? this.value.value[this.pickerDirective.startKey].format(this.oformat) +\n      this.separator + this.value.value[this.pickerDirective.endKey].format(this.oformat) : null;\n    this.pickerDirective._el.nativeElement.value = chosenLabel;\n  }\n\n\n  getDateRangeToString(valueToString: string) {\n    let value = {};\n    let range = valueToString.split(this.separator);\n    value[this._startKey] = moment(range[0].trim(), this.oformat);\n    value[this._endKey] = moment(range[1].trim(), this.oformat);\n    return value;\n  }\n\n\n  resolveValidators(): ValidatorFn[] {\n    const validators: ValidatorFn[] = super.resolveValidators();\n\n    validators.push(this.rangeDateValidator.bind(this));\n    if (Util.isDefined(this._oMinDate)) {\n      validators.push(this.minDateValidator.bind(this));\n    }\n    if (Util.isDefined(this._oMaxDate)) {\n      validators.push(this.maxDateValidator.bind(this));\n    }\n\n    validators.push(this.parseDateValidator.bind(this));\n    return validators;\n  }\n\n  isObjectDataRangeNull(objectValue): boolean {\n    return objectValue !== null && objectValue.value !== null &&\n      !Util.isDefined(objectValue.value[this.pickerDirective.startKey]) &&\n      !Util.isDefined(objectValue.value[this.pickerDirective.endKey]);\n  }\n\n\n  protected rangeDateValidator(control: FormControl): ValidationErrors {\n\n    if ((control.value instanceof Object)\n      && !this.isObjectDataRangeNull(control) && control.value[this._endKey].isSameOrBefore(control.value[this._startKey])) {\n      return {\n        dateRange: true\n      };\n    }\n    return {};\n  }\n\n  protected minDateValidator(control: FormControl): ValidationErrors {\n    const mindate = moment(this._oMinDate);\n    if ((control.value instanceof Object)\n      && !this.isObjectDataRangeNull(control) && control.value[this._startKey].isBefore(mindate)) {\n      return {\n        dateRangeMin: {\n          dateMin: mindate.format(this.oformat)\n        }\n      };\n    }\n    return {};\n  }\n\n  protected maxDateValidator(control: FormControl): ValidationErrors {\n    const maxdate = moment(this._oMaxDate);\n    if ((control.value instanceof Object)\n      && !this.isObjectDataRangeNull(control) && control.value[this._endKey].isAfter(maxdate)) {\n      return {\n        dateRangeMax: {\n          dateMax: maxdate.format(this.oformat)\n        }\n      };\n    }\n    return {};\n  }\n  protected parseDateValidator(control: FormControl): ValidationErrors {\n    if ((control.value instanceof Object)\n      && !this.isObjectDataRangeNull(control)\n      && ((control.value[this._startKey] && !control.value[this._startKey].isValid())\n        || (control.value[this._endKey] && !control.value[this._endKey].isValid()))) {\n      return {\n        dateRangeParse: {\n          format: this.oformat + this._localeOptions.separator + this.oformat\n        }\n      };\n    }\n    return {};\n  }\n}\n\n@NgModule({\n  declarations: [DaterangepickerComponent, ODateRangeInputComponent, ODaterangepickerDirective],\n  imports: [CommonModule, OSharedModule],\n  exports: [ODateRangeInputComponent],\n  entryComponents: [\n    DaterangepickerComponent\n  ],\n  providers: []\n})\nexport class ODateRangeInputModule { }\n"]}