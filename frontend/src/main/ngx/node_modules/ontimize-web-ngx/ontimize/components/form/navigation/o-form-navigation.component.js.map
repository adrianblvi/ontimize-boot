{"version":3,"file":"o-form-navigation.component.js","sourceRoot":"","sources":["../../../../../tmp/ontimize/components/form/navigation/o-form-navigation.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, forwardRef, Inject, Injector, OnDestroy, ViewEncapsulation } from '@angular/core';\nimport { NavigationExtras, Router } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { OFormLayoutManagerComponent } from '../../../layouts';\nimport { NavigationService, ONavigationItem } from '../../../services/navigation.service';\nimport { OntimizeService } from '../../../services/ontimize.service';\nimport { dataServiceFactory } from '../../../services/data-service.provider';\nimport { Codes, Util } from '../../../utils';\nimport { OFormComponent } from '../o-form.component';\nimport { OFormNavigationClass } from './o-form.navigation.class';\n\nexport type QueryConfiguration = {\n  serviceType: string;\n  queryArguments: any[];\n  entity: string;\n  service: string;\n  queryMethod: string;\n  totalRecordsNumber: number;\n  queryRows: number;\n  queryRecordOffset: number;\n};\n\n@Component({\n  moduleId: module.id,\n  selector: 'o-form-navigation',\n  template: `\n    <ng-container *ngIf=\"showNavigation()\">\n      <button mat-icon-button class=\"o-form-toolbar-button\" [disabled]=\"isFirst()\" (click)=\"first()\">\n        <mat-icon aria-label=\"First\" layout-padding svgIcon=\"ontimize:first_page\"></mat-icon>\n      </button>\n      <button mat-icon-button class=\"o-form-toolbar-button\" [disabled]=\"isFirst()\" (click)=\"previous()\">\n        <mat-icon aria-label=\"Previous\" layout-padding svgIcon=\"ontimize:keyboard_arrow_left\"></mat-icon>\n      </button>\n      <span layout-padding>{{ getRecordIndex() }} / {{ getTotalRecordsNumber() }}</span>\n      <button mat-icon-button class=\"o-form-toolbar-button\" [disabled]=\"isLast()\" (click)=\"next()\">\n        <mat-icon aria-label=\"Next\" layout-padding svgIcon=\"ontimize:keyboard_arrow_right\"></mat-icon>\n      </button>\n      <button mat-icon-button class=\"o-form-toolbar-button\" [disabled]=\"isLast()\" (click)=\"last()\">\n        <mat-icon aria-label=\"Last\" layout-padding svgIcon=\"ontimize:last_page\"></mat-icon>\n      </button>\n    </ng-container>\n  `,\n  styles: [`\n    .o-form-navigation .mat-icon{cursor:pointer}.o-form-navigation span{cursor:default}\n  `],\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class.o-form-navigation]': 'true'\n  },\n  providers: [\n    { provide: OntimizeService, useFactory: dataServiceFactory, deps: [Injector] }\n  ]\n})\nexport class OFormNavigationComponent implements OnDestroy {\n\n  public navigationData: Array<any> = [];\n  private _currentIndex = 0;\n\n  protected formNavigation: OFormNavigationClass;\n  protected navigationService: NavigationService;\n  protected formLayoutManager: OFormLayoutManagerComponent;\n\n  protected querySubscription: Subscription;\n  protected dataService: any;\n  protected queryConf: QueryConfiguration;\n\n  constructor(\n    protected injector: Injector,\n    @Inject(forwardRef(() => OFormComponent)) private _form: OFormComponent,\n    private router: Router\n  ) {\n    this.formNavigation = this._form.getFormNavigation();\n    this.navigationService = this.injector.get(NavigationService);\n\n    this.formLayoutManager = this._form.getFormManager();\n\n    let navData;\n    if (this.formLayoutManager && this.formLayoutManager.isDialogMode()) {\n      navData = this.navigationService.getLastItem();\n    } else {\n      navData = this.navigationService.getPreviousRouteData();\n    }\n    if (Util.isDefined(navData)) {\n      this.navigationData = navData.keysValues || [];\n      this.queryConf = navData.queryConfiguration;\n    }\n    this.currentIndex = this.getCurrentIndex();\n    this.configureService();\n  }\n\n  configureService() {\n    if (!this.queryConf) {\n      return;\n    }\n    let loadingService: any = OntimizeService;\n    if (this.queryConf.serviceType) {\n      loadingService = this.queryConf.serviceType;\n    }\n    try {\n      this.dataService = this.injector.get(loadingService);\n      if (Util.isDataService(this.dataService)) {\n        let serviceCfg = this.dataService.getDefaultServiceConfiguration(this.queryConf.service);\n        if (this.queryConf.entity) {\n          serviceCfg['entity'] = this.queryConf.entity;\n        }\n        this.dataService.configureService(serviceCfg);\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  protected queryNavigationData(offset: number, length: number = undefined): Promise<any> {\n    const self = this;\n    return new Promise<any>((resolve: any, reject: any) => {\n      const conf = self.queryConf;\n      let queryArgs = conf.queryArguments;\n\n      queryArgs[1] = self.getKeysArray();\n      queryArgs[4] = offset;\n      queryArgs[5] = length ? length : conf.queryRows;\n\n      self.querySubscription = self.dataService[conf.queryMethod].apply(self.dataService, queryArgs).subscribe(res => {\n        if (res.code === Codes.ONTIMIZE_SUCCESSFUL_CODE) {\n          self.navigationData = res.data;\n          self.queryConf.queryRecordOffset = offset;\n        }\n        resolve();\n      }, () => {\n        reject();\n      });\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.querySubscription) {\n      this.querySubscription.unsubscribe();\n    }\n  }\n\n  protected getKeysArray(): string[] {\n    // getting available navigationData keys\n    const navData = this.navigationData ? (this.navigationData[0] || {}) : {};\n    let keysArray = [];\n    this._form.keysArray.forEach(key => {\n      if (navData.hasOwnProperty(key)) {\n        keysArray.push(key);\n      }\n    });\n    return keysArray;\n  }\n\n  getCurrentIndex(): number {\n    const keysArray = this.getKeysArray();\n    // current url keys object\n    let currentKeys = {};\n    const currentItem = this.formNavigation.getUrlParams();\n    keysArray.forEach(key => {\n      currentKeys[key] = currentItem[key];\n    });\n    let index: number = (this.navigationData || []).findIndex((item: any) => {\n      let itemKeys = {};\n      keysArray.forEach(key => {\n        itemKeys[key] = item[key];\n      });\n      return Util.isEquivalent(itemKeys, currentKeys);\n    });\n    return index >= 0 ? index : 0;\n  }\n\n  next() {\n    let total = this.navigationData.length;\n    let index = this.currentIndex + 1;\n    if (total > index) {\n      this.move(index);\n    } else if (this.queryConf) {\n      const offset: number = (this.queryConf.queryRecordOffset || 0) + this.queryConf.queryRows;\n      this.queryNavigationData(offset).then(() => {\n        this.move(0);\n      });\n    } else {\n      console.error('form-toolbar->next(): total > index');\n    }\n  }\n\n  previous() {\n    let index = this.currentIndex - 1;\n    if (index >= 0) {\n      this.move(index);\n    } else if (this.queryConf) {\n      const offset: number = this.queryConf.queryRecordOffset - this.queryConf.queryRows;\n      this.queryNavigationData(offset).then(() => {\n        this.move(this.navigationData.length - 1);\n      });\n    } else {\n      console.error('form-toolbar->next(): index < 0');\n    }\n  }\n\n  first() {\n    if (!this.queryConf || this.queryConf.queryRecordOffset === 0) {\n      this.move(0);\n    } else {\n      this.queryNavigationData(0).then(() => {\n        this.move(0);\n      });\n    }\n  }\n\n  last() {\n    if (!this.queryConf || this.isLast()) {\n      let index = this.navigationData.length - 1;\n      this.move(index);\n    } else {\n      const offset = this.queryConf.totalRecordsNumber - this.queryConf.queryRows;\n      this.queryNavigationData(offset, this.queryConf.queryRows).then(() => {\n        this.move(this.navigationData.length - 1);\n      });\n    }\n  }\n\n  isFirst() {\n    let result: boolean = this.currentIndex === 0;\n    if (result && this.queryConf) {\n      result = this.queryConf.queryRecordOffset === 0;\n    }\n    return result;\n  }\n\n  isLast() {\n    let result: boolean = this.currentIndex === (this.navigationData.length - 1);\n    if (result && this.queryConf) {\n      result = (this.queryConf.queryRecordOffset + this.queryConf.queryRows)\n        >= this.queryConf.totalRecordsNumber;\n    }\n    return result;\n  }\n\n  move(index: number) {\n    this._form.showConfirmDiscardChanges().then(res => {\n      if (res === true) {\n        this.currentIndex = index;\n        if (this.formLayoutManager && this.formLayoutManager.isDialogMode()) {\n          this.moveInDialogManager(this.formLayoutManager, index);\n        } else {\n          this.moveWithoutManager(index);\n        }\n      }\n    });\n  }\n\n  private moveWithoutManager(index: number) {\n    let route = this.getRouteOfSelectedRow(this.navigationData[index]);\n    if (route.length > 0) {\n      this.navigationService.removeLastItem();\n      const navData: ONavigationItem = this.navigationService.getLastItem();\n      if (navData) {\n        let extras: NavigationExtras = {};\n        extras[Codes.QUERY_PARAMS] = Codes.getIsDetailObject();\n        const detailRoute = navData.getDetailFormRoute();\n        if (Util.isDefined(detailRoute)) {\n          route.unshift(detailRoute);\n        }\n        route.unshift(navData.url);\n        this._form.canDiscardChanges = true;\n        this.router.navigate(route, extras).then((navigationDone: boolean) => {\n          if (navigationDone) {\n            this.currentIndex = index;\n          }\n        });\n      }\n    }\n  }\n\n  private moveInDialogManager(formLayoutManager: any, index: number) {\n    formLayoutManager.dialogRef.componentInstance.urlParams = this.navigationData[index];\n    this._form.setUrlParamsAndReload(this.navigationData[index]);\n  }\n\n  getRouteOfSelectedRow(item: any) {\n    let route = [];\n    if (Util.isObject(item)) {\n      this._form.keysArray.forEach(key => {\n        if (Util.isDefined(item[key])) {\n          route.push(item[key]);\n        }\n      });\n    }\n    return route;\n  }\n\n  showNavigation() {\n    return (this.navigationData || []).length > 1;\n  }\n\n  set currentIndex(arg: number) {\n    this._currentIndex = arg;\n  }\n\n  get currentIndex(): number {\n    return this._currentIndex;\n  }\n\n  getRecordIndex(): number {\n    let index = this.currentIndex + 1;\n    if (this.queryConf) {\n      index += this.queryConf.queryRecordOffset;\n    }\n    return index;\n  }\n\n  getTotalRecordsNumber(): number {\n    if (this.queryConf && this.queryConf.totalRecordsNumber) {\n      return this.queryConf.totalRecordsNumber;\n    }\n    return this.navigationData.length;\n  }\n}\n"]}