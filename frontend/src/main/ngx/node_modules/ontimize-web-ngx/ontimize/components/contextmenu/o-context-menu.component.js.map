{"version":3,"file":"o-context-menu.component.js","sourceRoot":"","sources":["../../../../tmp/ontimize/components/contextmenu/o-context-menu.component.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,eAAe,EAAE,YAAY,EAAE,QAAQ,EAAqB,SAAS,EAAE,MAAM,eAAe,CAAC;AACjH,OAAO,EAAE,YAAY,EAAE,MAAM,MAAM,CAAC;AAEpC,OAAO,EAAE,mBAAmB,EAAE,MAAM,wBAAwB,CAAC;AAC7D,OAAO,EAAwB,mBAAmB,EAAE,MAAM,0BAA0B,CAAC;AAErF,MAAM,CAAC,IAAM,8BAA8B,GAAG;IAC5C,QAAQ;IACR,SAAS;CACV,CAAC;AAEF;IAkBE,+BACY,QAAkB;QAAlB,aAAQ,GAAR,QAAQ,CAAU;QAPvB,WAAM,GAAsB,IAAI,YAAY,EAAE,CAAC;QAC/C,YAAO,GAAsB,IAAI,YAAY,EAAE,CAAC;QAG7C,iBAAY,GAAiB,IAAI,YAAY,EAAE,CAAC;QAKxD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;IACpE,CAAC;IAEM,wCAAQ,GAAf;QAAA,iBAGC;QAFC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,eAAe,CAAC,SAAS,CAAC,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,eAAe,CAAC,KAAK,CAAC,EAA3B,CAA2B,CAAC,CAAC,CAAC;QAChH,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,SAAS,CAAC,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,EAAnB,CAAmB,CAAC,CAAC,CAAC;IAC3G,CAAC;IAEM,2CAAW,GAAlB;QACE,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;IAClC,CAAC;IAEM,+CAAe,GAAtB,UAAuB,MAA4B;QACjD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,MAAqB,CAAC;QACjD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACzB,IAAI,MAAM,CAAC,WAAW,KAAK,IAAI,EAAE;YAC/B,OAAO;SACR;QACD,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAC1C,IAAI,MAAM,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;YAC/B,IAAI,CAAC,mBAAmB,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;SAClD;IACH,CAAC;;gBA3CF,SAAS,SAAC;oBACT,QAAQ,EAAE,MAAM,CAAC,EAAE;oBACnB,QAAQ,EAAE,gBAAgB;oBAC1B,QAAQ,EAAE,GAAG;oBACb,OAAO,EAAE,8BAA8B;iBACxC;;;gBAhBkD,QAAQ;;;oCAmBxD,eAAe,SAAC,mBAAmB;;IAqCtC,4BAAC;CAAA,AA7CD,IA6CC;SAvCY,qBAAqB","sourcesContent":["import { Component, ContentChildren, EventEmitter, Injector, OnDestroy, OnInit, QueryList } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { OComponentMenuItems } from './o-content-menu.class';\nimport { IOContextMenuContext, OContextMenuService } from './o-context-menu.service';\n\nexport const DEFAULT_OUTPUTS_O_CONTEXT_MENU = [\n  'onShow',\n  'onClose'\n];\n\n@Component({\n  moduleId: module.id,\n  selector: 'o-context-menu',\n  template: ' ',\n  outputs: DEFAULT_OUTPUTS_O_CONTEXT_MENU\n})\nexport class OContextMenuComponent implements OnDestroy, OnInit {\n\n  @ContentChildren(OComponentMenuItems)\n  public oContextMenuItems: QueryList<OComponentMenuItems>;\n\n  public origin: HTMLElement;\n  public onShow: EventEmitter<any> = new EventEmitter();\n  public onClose: EventEmitter<any> = new EventEmitter();\n\n  public oContextMenuService: OContextMenuService;\n  protected subscription: Subscription = new Subscription();\n\n  constructor(\n    protected injector: Injector\n  ) {\n    this.oContextMenuService = this.injector.get(OContextMenuService);\n  }\n\n  public ngOnInit(): void {\n    this.subscription.add(this.oContextMenuService.showContextMenu.subscribe(param => this.showContextMenu(param)));\n    this.subscription.add(this.oContextMenuService.closeContextMenu.subscribe(param => this.onClose.emit()));\n  }\n\n  public ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  public showContextMenu(params: IOContextMenuContext): void {\n    this.origin = params.event.target as HTMLElement;\n    this.onShow.emit(params);\n    if (params.contextMenu !== this) {\n      return;\n    }\n    params.menuItems = this.oContextMenuItems;\n    if (params.menuItems.length > 0) {\n      this.oContextMenuService.openContextMenu(params);\n    }\n  }\n\n}\n"]}