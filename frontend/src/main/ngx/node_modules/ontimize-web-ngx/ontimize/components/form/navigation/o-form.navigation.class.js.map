{"version":3,"file":"o-form.navigation.class.js","sourceRoot":"","sources":["../../../../../tmp/ontimize/components/form/navigation/o-form.navigation.class.ts"],"names":[],"mappings":"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","sourcesContent":["import { EventEmitter, Injector } from '@angular/core';\nimport { ActivatedRoute, NavigationExtras, Router, UrlSegmentGroup } from '@angular/router';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { OFormLayoutDialogComponent } from '../../../layouts/form-layout/dialog/o-form-layout-dialog.component';\nimport { IDetailComponentData, OFormLayoutManagerComponent } from '../../../layouts/form-layout/o-form-layout-manager.component';\nimport { DialogService, NavigationService, ONavigationItem } from '../../../services';\nimport { Codes, SQLTypes, Util } from '../../../utils';\nimport { OFormComponent } from '../o-form.component';\n\n\nexport class OFormNavigationClass {\n\n  formLayoutManager: OFormLayoutManagerComponent;\n  formLayoutDialog: OFormLayoutDialogComponent;\n  id: string;\n\n  protected dialogService: DialogService;\n  protected navigationService: NavigationService;\n\n  protected qParamSub: Subscription;\n  protected queryParams: any;\n\n  protected urlParamSub: Subscription;\n  protected urlParams: Object;\n\n  protected urlSub: Subscription;\n  protected urlSegments: any = [];\n\n  protected combinedNavigationStream: Observable<any>;\n  protected combinedNavigationStreamSubscription: Subscription;\n  protected onUrlParamChangedStream: EventEmitter<Object> = new EventEmitter<Object>();\n\n  public navigationStream: EventEmitter<Object> = new EventEmitter<Object>();\n\n  protected onCloseTabSubscription: Subscription;\n  protected cacheStateSubscription: Subscription;\n\n  constructor(\n    protected injector: Injector,\n    protected form: OFormComponent,\n    protected router: Router,\n    protected actRoute: ActivatedRoute\n  ) {\n    this.dialogService = injector.get(DialogService);\n    this.navigationService = injector.get(NavigationService);\n\n    try {\n      this.formLayoutManager = this.injector.get(OFormLayoutManagerComponent);\n    } catch (e) {\n      // No parent formLayoutManager\n    }\n\n    try {\n      this.formLayoutDialog = this.injector.get(OFormLayoutDialogComponent);\n    } catch (e) {\n      // No parent form layout dialog\n    }\n\n    if (this.formLayoutDialog && !this.formLayoutManager) {\n      this.formLayoutManager = this.formLayoutDialog.formLayoutManager;\n    }\n\n    const self = this;\n    this.combinedNavigationStream = combineLatest(\n      self.onUrlParamChangedStream.asObservable()\n    );\n\n    this.combinedNavigationStream.subscribe(valArr => {\n      if (Util.isArray(valArr) && valArr.length === 1 && valArr[0]) {\n        self.navigationStream.emit(true);\n      }\n    });\n  }\n\n  initialize() {\n    if (this.formLayoutManager && this.formLayoutManager.isTabMode()) {\n      this.id = this.formLayoutManager.getLastTabId();\n    }\n  }\n\n  destroy() {\n    if (this.qParamSub) {\n      this.qParamSub.unsubscribe();\n    }\n    if (this.urlParamSub) {\n      this.urlParamSub.unsubscribe();\n    }\n    if (this.urlSub) {\n      this.urlSub.unsubscribe();\n    }\n    if (this.combinedNavigationStreamSubscription) {\n      this.combinedNavigationStreamSubscription.unsubscribe();\n    }\n  }\n\n  subscribeToQueryParams() {\n    if (this.formLayoutManager) {\n      const cacheData: IDetailComponentData = this.formLayoutManager.getFormCacheData(this.id);\n      if (Util.isDefined(cacheData)) {\n        this.queryParams = cacheData.queryParams || {};\n        this.parseQueryParams();\n      }\n    } else {\n      const self = this;\n      this.qParamSub = this.actRoute.queryParams.subscribe(params => {\n        if (params) {\n          self.queryParams = params;\n          self.parseQueryParams();\n        }\n      });\n    }\n  }\n\n  private parseQueryParams() {\n    let isDetail = this.queryParams[Codes.IS_DETAIL];\n    // ensuring isdetail = false when using form layout manager\n    this.form.isDetailForm = this.formLayoutManager ? false : (isDetail === 'true');\n  }\n\n  subscribeToUrlParams() {\n    if (this.formLayoutManager) {\n      const cacheData: IDetailComponentData = this.formLayoutManager.getFormCacheData(this.id);\n      if (Util.isDefined(cacheData)) {\n        this.urlParams = cacheData.params;\n        this.parseUrlParams();\n      }\n    } else {\n      const self = this;\n      this.urlParamSub = this.actRoute.params.subscribe(params => {\n        self.urlParams = params;\n        this.parseUrlParams();\n      });\n    }\n  }\n\n  private parseUrlParams() {\n    if (Util.isDefined(this.urlParams) && Util.isDefined(this.urlParams[Codes.PARENT_KEYS_KEY])) {\n      this.form.formParentKeysValues = Util.decodeParentKeys(this.urlParams[Codes.PARENT_KEYS_KEY]);\n    }\n    //TODO Obtain 'datatype' of each key contained into urlParams for\n    // for building correctly query filter!!!!\n    if (this.urlParams) {\n      this.onUrlParamChangedStream.emit(true);\n    }\n  }\n\n  subscribeToUrl() {\n    if (this.formLayoutManager) {\n      const cacheData: IDetailComponentData = this.formLayoutManager.getFormCacheData(this.id);\n      if (Util.isDefined(cacheData)) {\n        this.urlSegments = cacheData.urlSegments;\n      }\n    } else {\n      const self = this;\n      this.urlSub = this.actRoute.url.subscribe(urlSegments => {\n        self.urlSegments = urlSegments;\n      });\n    }\n  }\n\n  subscribeToCacheChanges(onCacheEmptyStateChanges: EventEmitter<boolean>) {\n    this.cacheStateSubscription = onCacheEmptyStateChanges.asObservable().subscribe(res => {\n      this.setModifiedState(!res);\n    });\n  }\n\n  getCurrentKeysValues(): Object {\n    let filter = {};\n    if (this.urlParams) {\n      filter = this.getFilterFromObject(this.urlParams);\n    }\n    return filter;\n  }\n\n  private getFilterFromObject(objectParam: any) {\n    let filter = {};\n    if (!objectParam || Object.keys(objectParam).length === 0) {\n      return filter;\n    }\n    if (this.form.keysArray) {\n      this.form.keysArray.forEach((key, index) => {\n        if (objectParam[key]) {\n          filter[key] = SQLTypes.parseUsingSQLType(objectParam[key], this.form.keysSqlTypesArray[index]);\n        }\n      });\n    }\n    Object.keys(this.form._pKeysEquiv).forEach((item, index) => {\n      let urlVal = objectParam[this.form._pKeysEquiv[item]];\n      if (urlVal) {\n        filter[item] = SQLTypes.parseUsingSQLType(urlVal, this.form.keysSqlTypesArray[index]);\n      }\n    });\n    return filter;\n  }\n\n  getFilterFromUrlParams() {\n    let filter = Object.assign({}, this.getUrlParams() || {});\n    const urlParamsKeys = Object.keys(filter || {});\n    if (urlParamsKeys.length > 0) {\n      urlParamsKeys.forEach(key => {\n        if (key === Codes.PARENT_KEYS_KEY) {\n          delete filter[key];\n          Object.assign(filter, this.form.formParentKeysValues);\n        }\n      });\n    }\n    return filter;\n  }\n\n  getUrlSegments() {\n    return this.urlSegments;\n  }\n\n  getQueryParams() {\n    return this.queryParams;\n  }\n\n  setUrlParams(val: Object) {\n    this.urlParams = val;\n  }\n\n  getUrlParams() {\n    return this.urlParams;\n  }\n\n  setModifiedState(modified: boolean) {\n    if (this.formLayoutManager) {\n      this.formLayoutManager.setModifiedState(modified, this.id);\n    }\n  }\n\n  updateNavigation() {\n    if (this.formLayoutManager) {\n      const isInInsertMode = this.form.isInInsertMode();\n      let formData;\n      if (isInInsertMode) {\n        formData = {};\n        formData['new_tab_title'] = 'LAYOUT_MANANGER.INSERTION_MODE_TITLE';\n      } else if (this.formLayoutManager.allowToUpdateNavigation(this.form.oattr)) {\n        formData = {};\n        const self = this;\n        Object.keys(this.form.formData).forEach(key => {\n          formData[key] = self.form.formData[key].value;\n        });\n      }\n      if (formData) {\n        this.formLayoutManager.updateNavigation(formData, this.id, isInInsertMode);\n      }\n    }\n  }\n\n  navigateBack() {\n    if (!this.formLayoutManager && this.navigationService) {\n      const navData: ONavigationItem = this.navigationService.getPreviousRouteData();\n      if (navData) {\n        let extras = {};\n        extras[Codes.QUERY_PARAMS] = navData.queryParams;\n        this.router.navigate([navData.url], extras);\n      }\n    }\n  }\n\n  closeDetailAction(options?: any) {\n    if (this.formLayoutManager) {\n      this.formLayoutManager.closeDetail(this.id);\n    } else if (this.navigationService) {\n      this.form.beforeCloseDetail.emit();\n      const navData: ONavigationItem = this.navigationService.getPreviousRouteData();\n      if (navData) {\n        let extras: NavigationExtras = {};\n        extras[Codes.QUERY_PARAMS] = navData.queryParams;\n        this.router.navigate([navData.url], extras).then(val => {\n          if (val && options && options.changeToolbarMode) {\n            this.form.getFormToolbar().setInitialMode();\n          }\n        });\n      }\n    }\n  }\n\n  stayInRecordAfterInsert(insertedKeys: Object) {\n    if (this.formLayoutManager) {\n      this.form.setInitialMode();\n      const self = this;\n      const subscription = this.form.onDataLoaded.subscribe(() => {\n        const keys = self.form.getKeysValues();\n        self.formLayoutManager.updateActiveData({ params: keys });\n        const cacheData: IDetailComponentData = self.formLayoutManager.getFormCacheData(self.id);\n        if (Util.isDefined(cacheData)) {\n          self.urlParams = cacheData.params;\n        }\n        subscription.unsubscribe();\n      });\n      this.form.queryData(insertedKeys);\n    } else if (this.navigationService && this.form.keysArray && insertedKeys) {\n      let params: any[] = [];\n      this.form.keysArray.forEach((current, index) => {\n        if (insertedKeys[current]) {\n          params.push(insertedKeys[current]);\n        }\n      });\n      let extras: NavigationExtras = {};\n      let qParams: any = Object.assign({}, this.getQueryParams(), Codes.getIsDetailObject());\n      extras[Codes.QUERY_PARAMS] = qParams;\n      let route = [];\n      const navData: ONavigationItem = this.navigationService.getPreviousRouteData();\n      if (navData) {\n        route.push(navData.url);\n        const detailRoute = navData.getDetailFormRoute();\n        if (Util.isDefined(detailRoute)) {\n          route.push(detailRoute);\n        }\n        route.push(...params);\n        // deleting insertFormRoute as active mode (because stayInRecordAfterInsert changes it)\n        this.navigationService.deleteActiveFormMode(navData);\n      } else {\n        extras.relativeTo = this.actRoute;\n        route = ['../', ...params];\n      }\n      this.router.navigate(route, extras);\n    }\n  }\n\n  /**\n  * Navigates to 'insert' mode\n  */\n  goInsertMode(options?: any) {\n    if (this.formLayoutManager && this.formLayoutManager.isDialogMode()) {\n      this.form.setInsertMode();\n    } else if (this.navigationService) {\n      let route = [];\n      let extras: NavigationExtras = {};\n      const navData: ONavigationItem = this.navigationService.getPreviousRouteData();\n      if (!this.formLayoutManager && navData) {\n        route.push(navData.url);\n        const detailRoute = navData.getDetailFormRoute();\n        if (Util.isDefined(detailRoute)) {\n          route.push(detailRoute);\n        }\n        route.push(navData.getInsertFormRoute());\n      } else {\n        extras.relativeTo = this.actRoute;\n        route = ['../' + Codes.DEFAULT_INSERT_ROUTE];\n      }\n      this.storeNavigationFormRoutes('insertFormRoute');\n      this.router.navigate(route, extras).then((val) => {\n        if (val && options && options.changeToolbarMode) {\n          this.form.getFormToolbar().setInsertMode();\n        }\n      });\n    }\n  }\n\n  /**\n   * Navigates to 'edit' mode\n   */\n  goEditMode(options?: any) {\n    if (this.formLayoutManager && this.formLayoutManager.isDialogMode()) {\n      this.form.setUpdateMode();\n    } else if (this.navigationService) {\n      let route = [];\n      let extras: NavigationExtras = {};\n      if (this.form.isDetailForm) {\n        extras[Codes.QUERY_PARAMS] = Codes.getIsDetailObject();\n      }\n      extras[Codes.QUERY_PARAMS] = Object.assign({}, this.getQueryParams(), extras[Codes.QUERY_PARAMS] || {});\n\n      let params: any[] = [];\n      const urlParams = this.getUrlParams();\n      this.form.keysArray.map(key => {\n        if (urlParams[key]) {\n          params.push(urlParams[key]);\n        }\n      });\n      const navData: ONavigationItem = this.navigationService.getPreviousRouteData();\n      if (Util.isDefined(navData)) {\n        route.push(navData.url);\n        const detailRoute = navData.getDetailFormRoute();\n        if (Util.isDefined(detailRoute)) {\n          route.push(detailRoute);\n        }\n        route.push(...params);\n        route.push(navData.getEditFormRoute());\n      } else {\n        extras.relativeTo = this.actRoute;\n        route = ['../', ...params, Codes.DEFAULT_EDIT_ROUTE];\n      }\n      this.storeNavigationFormRoutes('editFormRoute');\n      this.form.beforeGoEditMode.emit();\n      this.router.navigate(route, extras).then((val) => {\n        if (val && options && options.changeToolbarMode) {\n          this.form.getFormToolbar().setEditMode();\n        }\n      });\n    }\n  }\n\n  /**\n  * @deprecated\n  */\n  getNestedLevelsNumber() {\n    let actRoute = this.actRoute;\n    let i = 0;\n    while (actRoute.parent) {\n      actRoute = actRoute.parent;\n      actRoute.url.subscribe(function (x) {\n        if (x && x.length) {\n          i++;\n        }\n      });\n    }\n    return i;\n  }\n\n  /**\n  * @deprecated\n  */\n  getFullUrlSegments() {\n    let fullUrlSegments = [];\n    const router = this.router;\n    if (router && router.url && router.url.length) {\n      const root: UrlSegmentGroup = router.parseUrl(router.url).root;\n      if (root && root.hasChildren() && root.children.primary) {\n        fullUrlSegments = root.children.primary.segments;\n      }\n    }\n    return fullUrlSegments;\n  }\n\n  showConfirmDiscardChanges(): Promise<boolean> {\n    let subscription: Promise<boolean> = undefined;\n    if (this.form.isInitialStateChanged() && !this.form.isInInsertMode()) {\n      subscription = this.dialogService.confirm('CONFIRM', 'MESSAGES.FORM_CHANGES_WILL_BE_LOST');\n    }\n    if (subscription === undefined) {\n      const observable = Observable.create(observer => {\n        observer.next(true);\n        observer.complete();\n      });\n      subscription = observable.toPromise();\n    }\n    return subscription;\n  }\n\n  protected storeNavigationFormRoutes(activeMode: string) {\n    this.navigationService.storeFormRoutes({\n      detailFormRoute: Codes.DEFAULT_DETAIL_ROUTE,\n      editFormRoute: Codes.DEFAULT_EDIT_ROUTE,\n      insertFormRoute: Codes.DEFAULT_INSERT_ROUTE\n    }, activeMode);\n  }\n\n}\n"]}