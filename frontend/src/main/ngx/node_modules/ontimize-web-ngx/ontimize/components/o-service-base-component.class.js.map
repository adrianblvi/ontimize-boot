{"version":3,"file":"o-service-base-component.class.js","sourceRoot":"","sources":["../../../tmp/ontimize/components/o-service-base-component.class.ts"],"names":[],"mappings":"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","sourcesContent":["import { ChangeDetectorRef, HostListener, Injector, NgZone, SimpleChange } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\nimport { InputConverter } from '../decorators';\nimport { DialogService, ILocalStorageComponent, LocalStorageService, OntimizeService } from '../services';\nimport { Codes, Util } from '../utils';\nimport { OFormComponent } from './form/o-form.component';\nimport { OQueryDataArgs, ServiceUtils } from './service.utils';\n\n\nexport const DEFAULT_INPUTS_O_SERVICE_BASE_COMPONENT = [\n  // attr [string]: list identifier. It is mandatory if data are provided through the data attribute. Default: entity (if set).\n  'oattr: attr',\n\n  // service [string]: JEE service path. Default: no value.\n  'service',\n\n  'serviceType : service-type',\n\n  // entity [string]: entity of the service. Default: no value.\n  'entity',\n\n  // query-on-init [no|yes]: query on init. Default: yes.\n  'queryOnInit: query-on-init',\n\n  // query-on-init [no|yes]: query on bind. Default: yes.\n  'queryOnBind: query-on-bind',\n\n  'queryOnEvent: query-on-event',\n\n  'pageable',\n\n  // columns [string]: columns of the entity, separated by ';'. Default: no value.\n  'columns',\n\n  // keys [string]: entity keys, separated by ';'. Default: no value.\n  'keys',\n\n  // parent-keys [string]: parent keys to filter, separated by ';'. Default: no value.\n  'parentKeys: parent-keys',\n\n  // static-data [Array<any>] : way to populate with static data. Default: no value.\n  'staticData: static-data',\n\n  // query-method [string]: name of the service method to perform queries. Default: query.\n  'queryMethod: query-method',\n\n  // paginated-query-method [string]: name of the service method to perform paginated queries. Default: advancedQuery.\n  'paginatedQueryMethod : paginated-query-method',\n\n  // query-rows [number]: number of rows per page. Default: 10.\n  'oQueryRows: query-rows',\n\n  // insert-method [string]: name of the service method to perform inserts. Default: insert.\n  'insertMethod: insert-method',\n\n  // update-method [string]: name of the service method to perform updates. Default: update.\n  'updateMethod: update-method',\n\n  // delete-method [string]: name of the service method to perform deletions. Default: delete.\n  'deleteMethod: delete-method',\n\n  'storeState: store-state',\n\n  // query-with-null-parent-keys [string][yes|no|true|false]: Indicates whether or not to trigger query method when parent-keys filter is null. Default: false\n  'queryWithNullParentKeys: query-with-null-parent-keys',\n\n  // [function]: function to execute on query error. Default: no value.\n  'queryFallbackFunction: query-fallback-function'\n  // ,\n\n  // 'insertFallbackFunction: insert-fallback-function',\n\n  // 'updateFallbackFunction: update-fallback-function',\n\n  // 'deleteFallbackFunction: delete-fallback-function'\n];\n\nexport class OServiceBaseComponent implements ILocalStorageComponent {\n\n  public static DEFAULT_INPUTS_O_SERVICE_BASE_COMPONENT = DEFAULT_INPUTS_O_SERVICE_BASE_COMPONENT;\n\n  protected localStorageService: LocalStorageService;\n  protected dialogService: DialogService;\n\n  /* inputs variables */\n  oattr: string;\n  service: string;\n  serviceType: string;\n  entity: string;\n  @InputConverter()\n  queryOnInit: boolean = true;\n  @InputConverter()\n  queryOnBind: boolean = true;\n  queryOnEvent: any;\n  @InputConverter()\n  pageable: boolean = false;\n  columns: string;\n  keys: string;\n  parentKeys: string;\n  staticData: Array<any>;\n  queryMethod: string = Codes.QUERY_METHOD;\n  paginatedQueryMethod: string = Codes.PAGINATED_QUERY_METHOD;\n\n  originalQueryRows: number = Codes.DEFAULT_QUERY_ROWS;\n  protected _queryRows = this.originalQueryRows;\n\n  @InputConverter()\n  set oQueryRows(value: number) {\n    if (Util.isDefined(value)) {\n      this.originalQueryRows = value;\n      this._queryRows = value;\n    }\n  }\n\n  get queryRows(): number {\n    return this._queryRows;\n  }\n\n  set queryRows(value: number) {\n    if (Util.isDefined(value)) {\n      this._queryRows = value;\n    }\n  }\n  insertMethod: string = Codes.INSERT_METHOD;\n  updateMethod: string = Codes.UPDATE_METHOD;\n  deleteMethod: string = Codes.DELETE_METHOD;\n  @InputConverter()\n  storeState: boolean = true;\n  @InputConverter()\n  queryWithNullParentKeys: boolean = false;\n  queryFallbackFunction: Function;\n  // insertFallbackFunction: Function;\n  // updateFallbackFunction: Function;\n  // deleteFallbackFunction: Function;\n  /* end of inputs variables */\n\n  /* parsed inputs variables */\n  protected colArray: Array<string> = [];\n  protected keysArray: Array<string> = [];\n  protected _pKeysEquiv = {};\n  protected dataArray: Array<any> = [];\n  protected oattrFromEntity: boolean = false;\n  /* end of parsed inputs variables */\n\n  protected onRouteChangeStorageSubscription: any;\n  protected onFormDataSubscribe: any;\n\n  protected loaderSubscription: Subscription;\n  protected querySubscription: Subscription;\n  protected dataService: any;\n  protected _state: any = {};\n\n  protected loadingSubject = new BehaviorSubject<boolean>(false);\n  public loading: Observable<boolean> = this.loadingSubject.asObservable();\n\n  protected form: OFormComponent;\n  protected alreadyStored: boolean = false;\n\n  protected queryOnEventSubscription: Subscription;\n  public cd: ChangeDetectorRef;//borrar\n  protected queryArguments: any[];\n\n  protected router: Router;\n  protected actRoute: ActivatedRoute;\n\n  protected sqlTypes = undefined;\n\n  constructor(\n    protected injector: Injector\n  ) {\n    this.dialogService = this.injector.get(DialogService);\n    this.localStorageService = this.injector.get(LocalStorageService);\n    this.router = this.injector.get(Router);\n    this.actRoute = this.injector.get(ActivatedRoute);\n    try {\n      this.cd = this.injector.get(ChangeDetectorRef);\n      this.form = this.injector.get(OFormComponent);\n    } catch (e) {\n      // no parent form\n    }\n  }\n\n  initialize(): void {\n    if (!Util.isDefined(this.oattr) && Util.isDefined(this.entity)) {\n      this.oattr = this.entity.replace('.', '_');\n      this.oattrFromEntity = true;\n    }\n    this.keysArray = Util.parseArray(this.keys);\n    this.colArray = Util.parseArray(this.columns, true);\n    let pkArray = Util.parseArray(this.parentKeys);\n    this._pKeysEquiv = Util.parseParentKeysEquivalences(pkArray, Codes.COLUMNS_ALIAS_SEPARATOR);\n\n    if (this.storeState) {\n      this.onRouteChangeStorageSubscription = this.localStorageService.onRouteChange.subscribe(res => {\n        this.updateStateStorage();\n        // when the storage is updated because a route change\n        // the alreadyStored control variable is changed to its initial value\n        this.alreadyStored = false;\n      });\n\n      this.initializeState();\n\n      // if query-rows in initial configuration is equals to original query-rows input\n      // query_rows will be the value in local storage\n      if (this.state.hasOwnProperty('query-rows')) {\n        if (this.state.hasOwnProperty('initial-configuration') && this.state['initial-configuration'].hasOwnProperty['query-rows']\n          && this.state['initial-configuration']['query-rows'] === this.originalQueryRows) {\n          this.queryRows = this.state['query-rows'];\n        }\n      }\n    }\n\n    if (this.staticData) {\n      this.queryOnBind = false;\n      this.queryOnInit = false;\n      this.setDataArray(this.staticData);\n    } else {\n      this.configureService();\n    }\n\n    if (this.form && Util.isDefined(this.dataService)) {\n      this.setFormComponent(this.form);\n    }\n\n    if (Util.isDefined(this.queryOnEvent) && Util.isDefined(this.queryOnEvent.subscribe)) {\n      const self = this;\n      this.queryOnEventSubscription = this.queryOnEvent.subscribe((value) => {\n        if (Util.isDefined(value) || this.queryWithNullParentKeys) {\n          self.queryData();\n        }\n      });\n    }\n\n    if (typeof this.queryFallbackFunction !== 'function') {\n      this.queryFallbackFunction = undefined;\n    }\n    // if (typeof this.insertFallbackFunction !== 'function') {\n    //   this.insertFallbackFunction = undefined;\n    // }\n    // if (typeof this.updateFallbackFunction !== 'function') {\n    //   this.updateFallbackFunction = undefined;\n    // }\n    // if (typeof this.deleteFallbackFunction !== 'function') {\n    //   this.deleteFallbackFunction = undefined;\n    // }\n  }\n\n  afterViewInit() {\n    //\n  }\n\n  destroy() {\n    if (this.onFormDataSubscribe) {\n      this.onFormDataSubscribe.unsubscribe();\n    }\n    if (this.querySubscription) {\n      this.querySubscription.unsubscribe();\n    }\n    if (this.loaderSubscription) {\n      this.loaderSubscription.unsubscribe();\n    }\n    if (this.onRouteChangeStorageSubscription) {\n      this.onRouteChangeStorageSubscription.unsubscribe();\n    }\n    if (this.queryOnEventSubscription) {\n      this.queryOnEventSubscription.unsubscribe();\n    }\n    this.updateStateStorage();\n  }\n\n  ngOnChanges(changes: { [propName: string]: SimpleChange }) {\n    if (Util.isDefined(changes['staticData'])) {\n      this.setDataArray(changes['staticData'].currentValue);\n    }\n  }\n\n  @HostListener('window:beforeunload', ['$event'])\n  beforeunloadHandler(event) {\n    this.updateStateStorage();\n  }\n\n  getAttribute(): string {\n    return this.oattr;\n  }\n\n  getComponentKey(): string {\n    return this.getAttribute();\n  }\n\n  getDataToStore(): Object {\n    return this.state;\n  }\n\n  getRouteKey(): string {\n    let route = this.router.url;\n    this.actRoute.params.subscribe(params => {\n      Object.keys(params).forEach(key => {\n        route = route.replace(params[key], key);\n      });\n    });\n    return route;\n  }\n\n  getKeys() {\n    return this.keysArray;\n  }\n\n  configureService() {\n    let loadingService: any = OntimizeService;\n    if (this.serviceType) {\n      loadingService = this.serviceType;\n    }\n    try {\n      this.dataService = this.injector.get(loadingService);\n      if (Util.isDataService(this.dataService)) {\n        let serviceCfg = this.dataService.getDefaultServiceConfiguration(this.service);\n        if (this.entity) {\n          serviceCfg['entity'] = this.entity;\n        }\n        this.dataService.configureService(serviceCfg);\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  getDataArray() {\n    return this.dataArray;\n  }\n\n  setDataArray(data: any): void {\n    if (Util.isArray(data)) {\n      this.dataArray = data;\n    } else if (Util.isObject(data)) {\n      this.dataArray = [data];\n    } else {\n      console.warn('Component has received not supported service data. Supported data are Array or Object');\n      this.dataArray = [];\n    }\n  }\n\n  public setFormComponent(form: OFormComponent): void {\n    if (!Util.isDefined(this.form)) {\n      this.form = form;\n    }\n\n    if (this.queryOnBind) {\n      this.onFormDataSubscribe = this.form.onDataLoaded.subscribe(() => this.pageable ? this.reloadPaginatedDataFromStart() : this.reloadData());\n    }\n  }\n\n  public queryData(filter?: any, ovrrArgs?: OQueryDataArgs): void {\n    let queryMethodName = this.pageable ? this.paginatedQueryMethod : this.queryMethod;\n    if (!this.dataService || !(queryMethodName in this.dataService) || !this.entity) {\n      return;\n    }\n    let filterParentKeys = ServiceUtils.getParentKeysFromForm(this._pKeysEquiv, this.form);\n    if (!ServiceUtils.filterContainsAllParentKeys(filterParentKeys, this._pKeysEquiv) && !this.queryWithNullParentKeys) {\n      this.setData([], []);\n    } else {\n      filter = Object.assign(filter || {}, filterParentKeys);\n      let queryArguments = this.getQueryArguments(filter, ovrrArgs);\n      if (this.querySubscription) {\n        this.querySubscription.unsubscribe();\n      }\n      if (this.loaderSubscription) {\n        this.loaderSubscription.unsubscribe();\n      }\n      this.loaderSubscription = this.load();\n      const self = this;\n      this.queryArguments = queryArguments;\n      this.querySubscription = this.dataService[queryMethodName].apply(this.dataService, queryArguments).subscribe(res => {\n        let data = undefined;\n        this.sqlTypes = undefined;\n        if (Util.isArray(res)) {\n          data = res;\n          this.sqlTypes = {};\n        } else if ((res.code === Codes.ONTIMIZE_SUCCESSFUL_CODE)) {\n          const arrData = (res.data !== undefined) ? res.data : [];\n          data = Util.isArray(arrData) ? arrData : [];\n          this.sqlTypes = res.sqlTypes;\n          if (this.pageable) {\n            this.updatePaginationInfo(res);\n          }\n        }\n        self.setData(data, this.sqlTypes, (ovrrArgs && ovrrArgs.replace));\n        self.loaderSubscription.unsubscribe();\n      }, err => {\n        self.setData([], []);\n        self.loaderSubscription.unsubscribe();\n        if (Util.isDefined(self.queryFallbackFunction)) {\n          self.queryFallbackFunction(err);\n        } else if (err && typeof err !== 'object') {\n          self.dialogService.alert('ERROR', err);\n        } else {\n          self.dialogService.alert('ERROR', 'MESSAGES.ERROR_QUERY');\n        }\n      });\n    }\n  }\n\n  public reloadData(): void {\n    this.queryData();\n  }\n\n  /**\n   * Reloads the component data and restarts the pagination.\n   */\n  reloadPaginatedDataFromStart(): void {\n    this.reloadData();\n  }\n\n  load(): any {\n    var self = this;\n    var zone = this.injector.get(NgZone);\n    var loadObservable = new Observable(observer => {\n      var timer = window.setTimeout(() => {\n        observer.next(true);\n      }, 250);\n\n      return () => {\n        window.clearTimeout(timer);\n        zone.run(() => {\n          self.loadingSubject.next(false);\n        });\n      };\n\n    });\n    var subscription = loadObservable.subscribe(val => {\n      zone.run(() => {\n        self.loadingSubject.next(val as boolean);\n      });\n    });\n    return subscription;\n  }\n\n  /**\n   * Extracting the given record keys\n   * @param item record object\n   * @returns object containing item object properties contained in keysArray\n   */\n  extractKeysFromRecord(item: any): Object {\n    let result = {};\n    if (Util.isObject(item)) {\n      this.keysArray.forEach(key => {\n        if (Util.isDefined(item[key])) {\n          result[key] = item[key];\n        }\n      });\n    }\n    return result;\n  }\n\n  getAttributesValuesToQuery(): Array<string> {\n    let result = this.colArray;\n    this.keysArray.forEach(key => {\n      if (result.indexOf(key) === -1) {\n        result.push(key);\n      }\n    });\n    return result;\n  }\n\n  getQueryArguments(filter: Object, ovrrArgs?: OQueryDataArgs): Array<any> {\n    const compFilter = this.getComponentFilter(filter);\n    const queryCols = this.getAttributesValuesToQuery();\n    let sqlTypes = (ovrrArgs && ovrrArgs.hasOwnProperty('sqltypes')) ? ovrrArgs.sqltypes : this.form ? this.form.getAttributesSQLTypes() : {};\n\n    let queryArguments = [compFilter, queryCols, this.entity, sqlTypes];\n    if (this.pageable) {\n      let queryOffset = (ovrrArgs && ovrrArgs.hasOwnProperty('offset')) ? ovrrArgs.offset : this.state.queryRecordOffset;\n      let queryRowsN = (ovrrArgs && ovrrArgs.hasOwnProperty('length')) ? ovrrArgs.length : this.queryRows;\n      queryArguments = queryArguments.concat([queryOffset, queryRowsN, undefined]);\n    }\n    return queryArguments;\n  }\n\n  updatePaginationInfo(queryRes: any) {\n    let resultEndIndex = queryRes.startRecordIndex + (queryRes.data ? queryRes.data.length : 0);\n    if (queryRes.startRecordIndex !== undefined) {\n      this.state.queryRecordOffset = resultEndIndex;\n    }\n    if (queryRes.totalQueryRecordsNumber !== undefined) {\n      this.state.totalQueryRecordsNumber = queryRes.totalQueryRecordsNumber;\n    }\n  }\n\n  getTotalRecordsNumber(): number {\n    return (this.state && this.state.totalQueryRecordsNumber !== undefined) ? this.state.totalQueryRecordsNumber : undefined;\n  }\n\n  getComponentFilter(existingFilter: any = {}): any {\n    return existingFilter;\n  }\n\n  getSqlTypes() {\n    return Util.isDefined(this.sqlTypes) ? this.sqlTypes : {};\n  }\n\n  get state(): any {\n    return this._state;\n  }\n\n  set state(arg: any) {\n    this._state = arg;\n  }\n\n  getParentKeysValues() {\n    return ServiceUtils.getParentKeysFromForm(this._pKeysEquiv, this.form);\n  }\n\n  protected updateStateStorage(): void {\n    if (this.localStorageService && this.storeState && !this.alreadyStored) {\n      this.alreadyStored = true;\n      this.localStorageService.updateComponentStorage(this, this.getRouteKey());\n    }\n  }\n\n  protected setData(data: any, sqlTypes?: any, replace?: boolean): void {\n    //\n  }\n\n  initializeState() {\n    // Get previous status\n    this.state = this.localStorageService.getComponentStorage(this, this.getRouteKey());\n  }\n}\n"]}