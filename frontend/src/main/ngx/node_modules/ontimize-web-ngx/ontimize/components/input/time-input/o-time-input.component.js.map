{"version":3,"file":"o-time-input.component.js","sourceRoot":"","sources":["../../../../../tmp/ontimize/components/input/time-input/o-time-input.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { CommonModule } from '@angular/common';\nimport { AfterViewInit, ChangeDetectorRef, Component, ElementRef, forwardRef, Inject, Injector, NgModule, OnDestroy, OnInit, Optional, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport moment from 'moment';\nimport { merge, Subscription } from 'rxjs';\n\nimport { InputConverter } from '../../../decorators';\nimport { OSharedModule } from '../../../shared';\nimport { Util } from '../../../utils';\nimport { OFormComponent } from '../../form/o-form.component';\nimport { IFormValueOptions, OFormValue } from '../../form/OFormValue';\nimport {\n  DEFAULT_INPUTS_O_FORM_DATA_COMPONENT,\n  DEFAULT_OUTPUTS_O_FORM_DATA_COMPONENT,\n  OFormDataComponent,\n  OValueChangeEvent\n} from '../../o-form-data-component.class';\nimport { DateFilterFunction, ODateInputComponent, ODateInputModule } from '../date-input/o-date-input.component';\nimport { OHourInputComponent, OHourInputModule } from '../hour-input/o-hour-input.component';\nimport { OFormControl } from '../o-form-control.class';\n\nexport const DEFAULT_INPUTS_O_TIME_INPUT = [\n  ...DEFAULT_INPUTS_O_FORM_DATA_COMPONENT,\n  'oDateFormat: date-format',\n  'oDateLocale: date-locale',\n  'oDateStartView: date-start-view',\n  'oDateMinDate: date-min',\n  'oDateMaxDate: date-max',\n  'oDateTouchUi: date-touch-ui',\n  'oDateStartAt: date-start-at',\n  'oDateFilterDate: date-filter-date',\n  'oDateTextInputEnabled: date-text-input-enabled',\n  'oHourFormat: hour-format',\n  'oHourMin: hour-min',\n  'oHourMax: hour-max',\n  'oHourTextInputEnabled: hour-text-input-enabled',\n  'oHourPlaceholder: hour-placeholder',\n  'oDatePlaceholder: date-placeholder'\n];\n\nexport const DEFAULT_OUTPUTS_O_TIME_INPUT = [\n  ...DEFAULT_OUTPUTS_O_FORM_DATA_COMPONENT\n];\n\n@Component({\n  moduleId: module.id,\n  selector: 'o-time-input',\n  template: `\n    <div [formGroup]=\"getFormGroup()\" [matTooltip]=\"tooltip\" [matTooltipClass]=\"tooltipClass\"\n      [matTooltipPosition]=\"tooltipPosition\" [matTooltipShowDelay]=\"tooltipShowDelay\"\n      [matTooltipHideDelay]=\"tooltipHideDelay\">\n      <div class=\"mat-form-field mat-form-field-appearance-legacy\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\"\n        fxLayoutGap=\"8px\">\n        <o-date-input #dateInput fxFlex attr=\"dateInput\" [read-only]=\"readOnly\" [enabled]=\"enabled\" [required]=\"isRequired\"\n          [label]=\"olabel\" clear-button=\"no\" automatic-registering=\"no\" automatic-binding=\"no\"\n          (onFocus)=\"innerOnFocus($event)\" (onBlur)=\"innerOnBlur($event)\" [format]=\"oDateFormat\" [locale]=\"oDateLocale\"\n          [start-view]=\"oDateStartView\" [min]=\"oDateMinDate\" [max]=\"oDateMaxDate\" [touch-ui]=\"oDateTouchUi\"\n          [start-at]=\"oDateStartAt\" [filter-date]=\"oDateFilterDate\" [text-input-enabled]=\"oDateTextInputEnabled\"\n          [placeholder]=\"oDatePlaceholder\" [label-visible]=\"labelVisible\" [hide-required-marker]=\"hideRequiredMarker\">\n        </o-date-input>\n\n        <span class=\"separator\">&ndash;</span>\n\n        <o-hour-input #hourInput fxFlex attr=\"hourInput\" [read-only]=\"readOnly\" [enabled]=\"enabled\" [required]=\"isRequired\"\n          clear-button=\"no\" automatic-registering=\"no\" automatic-binding=\"no\" (onFocus)=\"innerOnFocus($event)\"\n          (onBlur)=\"innerOnBlur($event)\" [format]=\"oHourFormat\" [text-input-enabled]=\"oHourTextInputEnabled\"\n          [min]=\"oHourMin\" [max]=\"oHourMax\" hide-required-marker=\"yes\" label-visible=\"no\" [placeholder]=\"oHourPlaceholder\">\n        </o-hour-input>\n\n        <button class=\"mat-form-field-suffix\" type=\"button\" *ngIf=\"showClearButton\" matSuffix mat-icon-button\n          (click)=\"onClickClearValue()\">\n          <mat-icon svgIcon=\"ontimize:close\"></mat-icon>\n        </button>\n      </div>\n\n      <mat-error *ngFor=\"let oError of getActiveOErrors()\" text=\"{{ oError.text | oTranslate }}\"></mat-error>\n    </div>\n  `,\n  styles: [`\n    .o-time-input .separator{cursor:default}.o-time-input .mat-form-field.icon-field:not(.custom-width).icon-field-1-suffix .mat-form-field-infix{width:auto}\n  `],\n  inputs: DEFAULT_INPUTS_O_TIME_INPUT,\n  outputs: DEFAULT_OUTPUTS_O_TIME_INPUT,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class.o-time-input]': 'true'\n  }\n})\nexport class OTimeInputComponent extends OFormDataComponent implements OnInit, AfterViewInit, OnDestroy {\n\n  public static DEFAULT_INPUTS_O_TIME_INPUT = DEFAULT_INPUTS_O_TIME_INPUT;\n  public static DEFAULT_OUTPUTS_O_TIME_INPUT = DEFAULT_OUTPUTS_O_TIME_INPUT;\n\n  public oDateFormat: string = 'L';\n  public oDateLocale: any;\n  public oDateStartView: 'month' | 'year' = 'month';\n  public oDateMinDate: any;\n  public oDateMaxDate: any;\n  @InputConverter()\n  public oDateTouchUi: boolean;\n  public oDateStartAt: any;\n  public oDateFilterDate: DateFilterFunction;\n  @InputConverter()\n  public oDateTextInputEnabled: boolean = true;\n  public oHourFormat: number = 24;\n  public oHourMin: string;\n  public oHourMax: string;\n  @InputConverter()\n  public oHourTextInputEnabled: boolean = true;\n  public oHourPlaceholder = '';\n  public oDatePlaceholder = '';\n\n  protected blockGroupValueChanges: boolean;\n  protected formGroup: FormGroup = new FormGroup({});\n\n  @ViewChild('dateInput')\n  protected dateInput: ODateInputComponent;\n\n  @ViewChild('hourInput')\n  protected hourInput: OHourInputComponent;\n\n  protected subscription: Subscription = new Subscription();\n\n  constructor(\n    @Optional() @Inject(forwardRef(() => OFormComponent)) form: OFormComponent,\n    elRef: ElementRef,\n    injector: Injector,\n    protected cd: ChangeDetectorRef) {\n    super(form, elRef, injector);\n    this._defaultSQLTypeKey = 'DATE';\n  }\n\n  public ngOnInit(): void {\n    super.ngOnInit();\n    const self = this;\n    const mergeSubscription = merge(this.dateInput.onValueChange, this.hourInput.onValueChange).subscribe((event: OValueChangeEvent) => {\n      if (event.isUserChange()) {\n        self.updateComponentValue();\n        const newValue = self._fControl.value;\n        self.emitOnValueChange(OValueChangeEvent.USER_CHANGE, newValue, self.oldValue);\n        self.oldValue = newValue;\n      }\n    });\n\n    this.subscription.add(mergeSubscription);\n  }\n\n  public ngAfterViewInit(): void {\n    this.modifyFormControls();\n    super.ngAfterViewInit();\n    this.registerFormControls();\n    this.setInnerComponentsData();\n  }\n\n  public ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  public createFormControl(cfg, validators): OFormControl {\n    this._fControl = super.createFormControl(cfg, validators);\n    this._fControl.fControlChildren = [this.dateInput, this.hourInput];\n    return this._fControl;\n  }\n\n  public onFormControlChange(value: any): void {\n    super.onFormControlChange(value);\n    this.setInnerComponentsData();\n  }\n\n  public setValue(newValue: any, options?: IFormValueOptions): void {\n    const changed = this.oldValue !== newValue;\n    super.setValue(newValue, options);\n    if (changed) {\n      this.setInnerComponentsData();\n    }\n  }\n\n  public onClickClearValue(): void {\n    this.blockGroupValueChanges = true;\n    if (this.dateInput) {\n      this.dateInput.clearValue();\n    }\n    if (this.hourInput) {\n      this.hourInput.clearValue();\n    }\n    this.clearValue();\n    this.blockGroupValueChanges = false;\n  }\n\n  protected setInnerComponentsData(): void {\n    let dateValue: any;\n    let hourValue: any;\n    if (Util.isDefined(this.value) && Util.isDefined(this.value.value)) {\n      const momentD = moment(this.value.value);\n      if (momentD.isValid()) {\n        dateValue = momentD.clone().startOf('day').valueOf();\n        hourValue = momentD.clone().valueOf() - dateValue;\n      }\n    }\n    if (this.dateInput) {\n      this.dateInput.setValue(dateValue);\n    }\n    if (this.hourInput) {\n      this.hourInput.setTimestampValue(hourValue);\n    }\n    this.cd.detectChanges();\n  }\n\n  protected updateComponentValue(): void {\n    if (!this.value) {\n      this.value = new OFormValue();\n    }\n    let timeValue: number;\n    const values = this.formGroup.getRawValue();\n    const mDate = (values['dateInput'] ? moment(values['dateInput']) : moment()).startOf('day');\n    const mHour = this.hourInput.valueType === 'timestamp' ? moment(values['hourInput']) : moment(values['hourInput'], this.hourInput.formatString);\n    timeValue = mDate.clone()\n      .set('hour', mHour.get('hour'))\n      .set('minute', mHour.get('minutes'))\n      .valueOf();\n    if (this._fControl) {\n      this._fControl.setValue(timeValue);\n      this._fControl.markAsDirty();\n    }\n    this.ensureOFormValue(timeValue);\n  }\n\n  protected modifyFormControls(): void {\n    if (this.dateInput) {\n      const self = this;\n      this.dateInput.getFormGroup = () => {\n        return self.formGroup;\n      };\n    }\n\n    if (this.hourInput) {\n      const self = this;\n      this.hourInput.getFormGroup = () => {\n        return self.formGroup;\n      };\n    }\n\n    if (this.form) {\n      this.form.formGroup.removeControl('dateInput');\n      this.form.formGroup.removeControl('hourInput');\n    }\n  }\n\n  protected registerFormControls(): void {\n    if (this.dateInput && this.dateInput.getFormControl()) {\n      this.formGroup.registerControl('dateInput', this.dateInput.getFormControl());\n    }\n    if (this.hourInput) {\n      if (this.hourInput.getFormControl()) {\n        this.formGroup.registerControl('hourInput', this.hourInput.getFormControl());\n      }\n    }\n  }\n\n}\n\n@NgModule({\n  declarations: [OTimeInputComponent],\n  imports: [CommonModule, ODateInputModule, OHourInputModule, OSharedModule],\n  exports: [OTimeInputComponent]\n})\nexport class OTimeInputModule { }\n"]}