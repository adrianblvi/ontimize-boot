{"version":3,"file":"o-list-item.directive.js","sourceRoot":"","sources":["../../../../../tmp/ontimize/components/list/list-item/o-list-item.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import { Directive, ElementRef, EventEmitter, HostListener, Input, OnDestroy, OnInit, Renderer2 } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { ObservableWrapper } from '../../../util/async';\nimport { Codes } from '../../../util/codes';\nimport { IList } from '../o-list.component';\n\n@Directive({\n  selector: 'o-list-item, mat-list-item[o-list-item], mat-card[o-list-item]',\n  exportAs: 'olistitem',\n  host: {\n    '[class.o-list-item]': 'true',\n    '(click)': 'onItemClicked($event)',\n    '(dblclick)': 'onItemDoubleClicked($event)'\n  }\n})\nexport class OListItemDirective implements OnInit, OnDestroy {\n\n  public mdClick: EventEmitter<any> = new EventEmitter();\n  public mdDoubleClick: EventEmitter<any> = new EventEmitter();\n\n  @Input('o-list-item')\n  public modelData: Object;\n\n  @Input('selectable')\n  public selectable: boolean = false;\n\n  protected _list: IList;\n  protected subcription: any;\n\n  constructor(\n    public _el: ElementRef,\n    private renderer: Renderer2,\n    public actRoute: ActivatedRoute\n  ) { }\n\n  public ngOnInit(): void {\n    this.subcription = this.actRoute.params.subscribe(params => this.updateActiveState(params));\n  }\n\n  public ngOnDestroy(): void {\n    if (this.subcription) {\n      this.subcription.unsubscribe();\n    }\n  }\n\n  @HostListener('mouseenter')\n  public onMouseEnter(): void {\n    if (!this.selectable && this._list.detailMode !== Codes.DETAIL_MODE_NONE) {\n      this.renderer.setStyle(this._el.nativeElement, 'cursor', 'pointer');\n    }\n  }\n\n  public updateActiveState(params): void {\n    if (this._list) {\n      const aKeys = this._list.getKeys();\n      if (this.modelData) {\n        let _act = false;\n        if (aKeys.length > 0) {\n          for (let k = 0; k < aKeys.length; ++k) {\n            const key = aKeys[k];\n            const id = params[key];\n            _act = (this.modelData[key] === id);\n            if (_act === false) {\n              break;\n            }\n          }\n        }\n        if (_act) {\n          this._el.nativeElement.classList.add('mat-active');\n        } else {\n          this._el.nativeElement.classList.remove('mat-active');\n        }\n      } else {\n        this._el.nativeElement.classList.remove('mat-active');\n      }\n    }\n  }\n\n  public onItemClicked(e?: Event): void {\n    if (!this.selectable) {\n      ObservableWrapper.callEmit(this.mdClick, this);\n    }\n  }\n\n  public onClick(onNext: (item: OListItemDirective) => void): Object {\n    return ObservableWrapper.subscribe(this.mdClick, onNext);\n  }\n\n  public onItemDoubleClicked(e?: Event): void {\n    if (!this.selectable) {\n      ObservableWrapper.callEmit(this.mdDoubleClick, this);\n    }\n  }\n\n  public onDoubleClick(onNext: (item: OListItemDirective) => void): Object {\n    return ObservableWrapper.subscribe(this.mdDoubleClick, onNext);\n  }\n\n  public isSelected(): boolean {\n    return this._list.isItemSelected(this.modelData);\n  }\n\n  public onSelect(): void {\n    this._list.setSelected(this.modelData);\n  }\n\n  public setListComponent(list: IList): void {\n    this._list = list;\n  }\n\n  public setItemData(data: any): void {\n    if (!this.modelData) {\n      this.modelData = data;\n    }\n  }\n\n  public getItemData(): any {\n    return this.modelData;\n  }\n\n}\n"]}