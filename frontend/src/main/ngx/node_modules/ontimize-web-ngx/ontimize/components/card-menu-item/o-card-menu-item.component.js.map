{"version":3,"file":"o-card-menu-item.component.js","sourceRoot":"","sources":["../../../../tmp/ontimize/components/card-menu-item/o-card-menu-item.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, ComponentFactory, ComponentFactoryResolver, ContentChildren, ElementRef, Injector, NgModule, OnDestroy, QueryList, ViewChild, ViewContainerRef, ViewEncapsulation } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { OSharedModule } from '../../shared';\nimport { InputConverter } from '../../decorators';\nimport { OTranslateService } from '../../services';\n\nexport const DEFAULT_INPUTS_O_MENU_CARD = [\n  'title',\n  'image',\n  'icon',\n  'tooltip',\n  'buttonText : button-text',\n  'disabledButton : disabled-button',\n  'mainContainerLayout : main-container-layout',\n  'secondaryContainerLayout : secondary-container-layout',\n  'route',\n  'detailComponent : detail-component',\n  'detailComponentInputs : detail-component-inputs',\n  'action'\n];\n\nexport const DEFAULT_OUTPUTS_O_MENU_CARD = [];\n\n@Component({\n  moduleId: module.id,\n  selector: 'o-card-menu-item',\n  template: `\n    <div class=\"o-card-menu-item-content\" (click)=\"onClick()\" fxLayout=\"column\" fxFill fxLayoutAlign=\"space-between center\"\n      layout-padding>\n\n      <div class=\"o-card-menu-item-main\" fxFlex=\"{{ showSecondaryContainer ? '40' : '80' }}\" [fxLayout]=\"mainContainerLayout\"\n        fxLayoutAlign=\"space-between center\">\n        <div *ngIf=\"useImage() || useIcon()\" fxFlex=\"80\" fxLayout=\"column\" fxLayoutAlign=\"center center\" class=\"o-card-menu-item-image-container\">\n          <img *ngIf=\"useImage()\" [src]=\"image\" />\n          <mat-icon *ngIf=\"useIcon()\" class=\"o-card-menu-item-icon\" fxLayoutAlign=\"center center\">{{ icon }}</mat-icon>\n        </div>\n\n        <div class=\"o-card-menu-item-title\" fxFlex=\"20\" fxLayout=\"column\" fxLayoutAlign=\"center center\" *ngIf=\"title !== undefined\">{{\n          title | oTranslate }}</div>\n\n        <mat-icon class=\"o-card-menu-item-info\" matTooltip=\"{{ tooltip | oTranslate }}\" *ngIf=\"tooltip\" svgIcon=\"ontimize:info_outline\"></mat-icon>\n\n        <ng-content select=\".main-container\"></ng-content>\n      </div>\n\n      <button type=\"button\" *ngIf=\"buttonText !== undefined\" [disabled]=\"disabledButton\" (click)=\"onButtonClick()\"\n        mat-button>{{ buttonText | oTranslate }}</button>\n\n      <div *ngIf=\"showSecondaryContainer\" class=\"o-card-menu-item-secondary\" fxFlex=\"50\" [fxLayout]=\"secondaryContainerLayout\"\n        fxLayoutAlign=\"space-around center\">\n        <ng-content select=\".secondary-container\"></ng-content>\n        <ng-container #menuCardContent *ngIf=\"detailComponent\">\n        </ng-container>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .o-card-menu-item{border-radius:3px}.o-card-menu-item .o-card-menu-item-main,.o-card-menu-item .o-card-menu-item-secondary{width:100%;padding:12px 0}.o-card-menu-item .o-card-menu-item-image-container{width:100%}.o-card-menu-item .o-card-menu-item-image-container .o-card-menu-item-icon{width:100%;height:100%;font-size:5em}.o-card-menu-item .o-card-menu-item-image-container img{max-width:100%;max-height:100%}.o-card-menu-item .mat-button,.o-card-menu-item .o-card-menu-item-title{font-weight:600}.o-card-menu-item .mat-button{width:100%;border-radius:5px;text-decoration:none}.o-card-menu-item .o-card-menu-item-main{position:relative}.o-card-menu-item .o-card-menu-item-icon,.o-card-menu-item .o-card-menu-item-title{cursor:default}.o-card-menu-item .o-card-menu-item-info{cursor:default;position:absolute;top:0;right:0}\n  `],\n  inputs: DEFAULT_INPUTS_O_MENU_CARD,\n  outputs: DEFAULT_OUTPUTS_O_MENU_CARD,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class.o-card-menu-item]': 'true',\n    '[class.mat-elevation-z1]': 'true',\n    '[class.compact]': '!showSecondaryContainer'\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class OCardMenuItemComponent implements AfterViewInit, OnDestroy {\n\n  public static DEFAULT_INPUTS_O_MENU_CARD = DEFAULT_INPUTS_O_MENU_CARD;\n  public static DEFAULT_OUTPUTS_O_MENU_CARD = DEFAULT_OUTPUTS_O_MENU_CARD;\n\n  title: string;\n  image: string;\n  icon: string;\n  tooltip: string;\n  buttonText: string;\n  @InputConverter()\n  disabledButton: boolean = false;\n  mainContainerLayout = 'column';\n  secondaryContainerLayout = 'column';\n  route: string;\n  action: () => void;\n  detailComponent: any;\n  detailComponentInputs: Object;\n\n  protected _detailComponentContainer: ViewContainerRef;\n\n  @ViewChild('menuCardContent', { read: ViewContainerRef })\n  set detailComponentContainer(content: ViewContainerRef) {\n    this._detailComponentContainer = content;\n  }\n\n  get detailComponentContainer(): ViewContainerRef {\n    return this._detailComponentContainer;\n  }\n\n  protected translateService: OTranslateService;\n  protected translateServiceSubscription: Subscription;\n\n  @ContentChildren('.secondary-container')\n  secondaryContent: QueryList<any>;\n\n  protected _showSecondaryContainer: boolean = true;\n\n  constructor(\n    protected injector: Injector,\n    protected router: Router,\n    protected actRoute: ActivatedRoute,\n    protected resolver: ComponentFactoryResolver,\n    protected cd: ChangeDetectorRef,\n    protected elRef: ElementRef\n  ) {\n    this.translateService = this.injector.get(OTranslateService);\n    this.translateServiceSubscription = this.translateService.onLanguageChanged.subscribe(() => {\n      this.cd.detectChanges();\n    });\n  }\n\n  ngAfterViewInit() {\n    if (this.detailComponentContainer && this.detailComponent) {\n      const factory: ComponentFactory<any> = this.resolver.resolveComponentFactory(this.detailComponent);\n      const ref = this.detailComponentContainer.createComponent(factory);\n      if (this.detailComponentInputs && ref.instance) {\n        const keys = Object.keys(this.detailComponentInputs);\n        for (let i = 0, len = keys.length; i < len; i++) {\n          ref.instance[keys[i]] = this.detailComponentInputs[keys[i]];\n        }\n      }\n    }\n    this.showSecondaryContainer = (this.detailComponentContainer && this.detailComponent) || this.secondaryContent.length > 0;\n    this.cd.detectChanges();\n  }\n\n  ngOnDestroy() {\n    if (this.translateServiceSubscription) {\n      this.translateServiceSubscription.unsubscribe();\n    }\n  }\n\n  useImage(): boolean {\n    return this.image !== undefined;\n  }\n\n  useIcon(): boolean {\n    return this.icon !== undefined && this.image === undefined;\n  }\n\n  onButtonClick() {\n    if (this.route) {\n      this.router.navigate([this.route], {\n        relativeTo: this.actRoute\n      });\n    } else if (this.action) {\n      this.action();\n    }\n  }\n\n  onClick() {\n    if (this.buttonText === undefined) {\n      this.onButtonClick();\n    }\n  }\n\n  get showSecondaryContainer(): boolean {\n    return this._showSecondaryContainer;\n  }\n\n  set showSecondaryContainer(val: boolean) {\n    this._showSecondaryContainer = val;\n    if (val) {\n      this.elRef.nativeElement.classList.remove('compact');\n    } else {\n      this.elRef.nativeElement.classList.add('compact');\n    }\n  }\n\n}\n\n@NgModule({\n  declarations: [OCardMenuItemComponent],\n  imports: [CommonModule, OSharedModule],\n  exports: [OCardMenuItemComponent]\n})\nexport class OCardMenuItemModule { }\n"]}