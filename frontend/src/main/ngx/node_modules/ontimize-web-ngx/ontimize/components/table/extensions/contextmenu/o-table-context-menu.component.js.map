{"version":3,"file":"o-table-context-menu.component.js","sourceRoot":"","sources":["../../../../../../tmp/ontimize/components/table/extensions/contextmenu/o-table-context-menu.component.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAE,uBAAuB,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,EAAE,QAAQ,EAAU,SAAS,EAAE,MAAM,eAAe,CAAC;AACpH,OAAO,EAAE,eAAe,EAAE,YAAY,EAAE,MAAM,MAAM,CAAC;AACrD,OAAO,EAAE,cAAc,EAAE,MAAM,wCAAwC,CAAC;AACxE,OAAO,EAAE,iBAAiB,EAAE,MAAM,sBAAsB,CAAC;AACzD,OAAO,EAAE,IAAI,EAAE,MAAM,mBAAmB,CAAC;AACzC,OAAO,EAAE,qBAAqB,EAAE,MAAM,gDAAgD,CAAC;AACvF,OAAO,EAAE,yBAAyB,EAA+B,eAAe,EAAE,MAAM,wBAAwB,CAAC;AAGjH,MAAM,CAAC,IAAM,iCAAiC,GAAG;IAC/C,2BAA2B;IAC3B,oBAAoB;IACpB,gBAAgB;IAChB,6BAA6B;IAC7B,gBAAgB;IAChB,2BAA2B;IAC3B,sBAAsB;IACtB,oBAAoB;IACpB,oBAAoB;CACrB,CAAC;AAEF;IAwIE,oCACY,QAAkB,EACsB,KAAsB;QAD9D,aAAQ,GAAR,QAAQ,CAAU;QACsB,UAAK,GAAL,KAAK,CAAiB;QAnGnE,oBAAe,GAA6B,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;QACtE,kBAAa,GAA6B,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;QACpE,oBAAe,GAA6B,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;QACtE,kBAAa,GAA6B,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;QACpE,uBAAkB,GAA6B,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;QACzE,qBAAgB,GAA6B,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;QACvE,oBAAe,GAA6B,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;QACtE,oBAAe,GAA6B,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;QAwFnE,4BAAuB,GAAiB,IAAI,YAAY,EAAE,CAAC;QAMnE,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;IAC/D,CAAC;IA7FD,sBAAI,kDAAU;aAMd;YACE,OAAO,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;QACzC,CAAC;aARD,UAAe,KAAc;YAC3B,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;gBAC9B,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,KAAY,CAAC,CAAC;aACzC;YACD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACnC,CAAC;;;OAAA;IAKD,sBAAI,gDAAQ;aAMZ;YACE,OAAO,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC;QACvC,CAAC;aARD,UAAa,KAAc;YACzB,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;gBAC9B,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,KAAY,CAAC,CAAC;aACzC;YACD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACjC,CAAC;;;OAAA;IAKD,sBAAI,sDAAc;aAMlB;YACE,OAAO,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;QACzC,CAAC;aARD,UAAmB,KAAc;YAC/B,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;gBAC9B,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,KAAY,CAAC,CAAC;aACzC;YACD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACnC,CAAC;;;OAAA;IAKD,sBAAI,gDAAQ;aAMZ;YACE,OAAO,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC;QACvC,CAAC;aARD,UAAa,KAAc;YACzB,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;gBAC9B,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,KAAY,CAAC,CAAC;aACzC;YACD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACjC,CAAC;;;OAAA;IAMD,sBAAI,qDAAa;aAMjB;YACE,OAAO,IAAI,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC;QAC5C,CAAC;aARD,UAAkB,KAAc;YAC9B,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;gBAC9B,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,KAAY,CAAC,CAAC;aACzC;YACD,IAAI,CAAC,KAAK,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC/G,CAAC;;;OAAA;IAKD,sBAAI,mDAAW;aAMf;YACE,OAAO,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;QAC1C,CAAC;aARD,UAAgB,KAAc;YAC5B,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;gBAC9B,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,KAAY,CAAC,CAAC;aACzC;YACD,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC;;;OAAA;IAKD,sBAAI,kDAAU;aAMd;YACE,OAAO,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;QACzC,CAAC;aARD,UAAe,KAAc;YAC3B,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;gBAC9B,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,KAAY,CAAC,CAAC;aACzC;YACD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACnC,CAAC;;;OAAA;IAKD,sBAAI,kDAAU;aAMd;YACE,OAAO,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;QACzC,CAAC;aARD,UAAe,KAAc;YAC3B,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;gBAC9B,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,KAAY,CAAC,CAAC;aACzC;YACD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACnC,CAAC;;;OAAA;IAmBM,6CAAQ,GAAf;QAAA,iBAWC;QAVC,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,SAAS,CAAC,UAAC,KAAU;YACpF,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,uBAAuB,EAAE,EAAE;gBACzC,KAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC;aAC7B;QACH,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC,UAAC,KAAU;YACnF,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC,CAAC;IAEN,CAAC;IAEM,oDAAe,GAAtB;QACE,IAAM,WAAW,GAAG,IAAI,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC;QACxE,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,IAAM,KAAK,GAAG,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC,CAAC;YAC/E,IAAI,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACxD;aAAM;YACL,IAAI,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;SAC9D;QACD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE;YACvC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;SAC5D;QACD,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;IAC1D,CAAC;IAEM,gDAAW,GAAlB,UAAmB,KAAK;QACtB,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC;QACjC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;IAEM,yCAAI,GAAX,UAAY,KAAK;QACf,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC;QACjC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAEM,wCAAG,GAAV;QACE,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;IACnB,CAAC;IAEM,8CAAS,GAAhB;QACE,IAAI,CAAC,KAAK,CAAC,wBAAwB,EAAE,CAAC;IACxC,CAAC;IAEM,gDAAW,GAAlB;QACE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;IAC/B,CAAC;IAEM,4CAAO,GAAd;QACE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;IACvB,CAAC;IAEM,6CAAQ,GAAf,UAAgB,KAAK;QACnB,IAAM,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC;QAC3D,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;IAClC,CAAC;IAEM,kDAAa,GAApB;QACE,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC7B,CAAC;IAEM,4CAAO,GAAd,UAAe,KAAK;QAClB,IAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC1F,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IAC7B,CAAC;IAEM,2CAAM,GAAb,UAAc,KAAK;QACjB,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;IACtB,CAAC;IAEM,4CAAO,GAAd;QACE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;IACvB,CAAC;IAEM,kDAAa,GAApB,UAAqB,KAAK;QACxB,IAAI,CAAC,KAAK,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACzC,IAAM,gBAAgB,GAAuB;YAC3C,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI;YACtB,QAAQ,EAAE,yBAAyB,CAAC,EAAE;YACtC,MAAM,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SACrC,CAAC;QACF,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,eAAe,CAAC,gBAAgB,CAAC,CAAC;QACxD,IAAI,CAAC,KAAK,CAAC,4BAA4B,EAAE,CAAC;IAC5C,CAAC;IAED,sBAAI,2DAAmB;aAAvB;YACE,OAAO,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,8BAA8B,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAChK,CAAC;;;OAAA;IAEM,mDAAc,GAArB,UAAsB,KAAK;QACzB,IAAI,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE;YACzB,IAAI,CAAC,KAAK,CAAC,sBAAsB,GAAG,IAAI,CAAC;YACzC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,kBAAkB,CAAC,MAAM,GAAG,IAAI,CAAC;YACvD,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;SAC7D;IACH,CAAC;IAEM,uDAAkB,GAAzB;QACE,IAAI,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,SAAS,GAAG,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC3E;QACD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACvC,CAAC;IAES,mDAAc,GAAxB,UAAyB,KAAU;QACjC,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;QACxB,IAAI,IAAI,EAAE;YACR,IAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC;YACjC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAChD,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;YACzB,IAAI,CAAC,kBAAkB,EAAE,CAAC;SAC3B;IACH,CAAC;;gBAjQF,SAAS,SAAC;oBACT,QAAQ,EAAE,MAAM,CAAC,EAAE;oBACnB,QAAQ,EAAE,sBAAsB;oBAChC,QAAQ,EAAE,6vFA6BT;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;oBAC/C,MAAM,EAAE,iCAAiC;iBAC1C;;;gBAxDgE,QAAQ;gBAMR,eAAe,uBAyJ3E,MAAM,SAAC,UAAU,CAAC,cAAM,OAAA,eAAe,EAAf,CAAe,CAAC;;;qCAT1C,SAAS,SAAC,oBAAoB;;IAxC/B;QADC,cAAc,EAAE;;;mEAMhB;IAqKH,iCAAC;CAAA,AAnQD,IAmQC;SA/NY,0BAA0B","sourcesContent":["import { ChangeDetectionStrategy, Component, forwardRef, Inject, Injector, OnInit, ViewChild } from '@angular/core';\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport { InputConverter } from '../../../../decorators/input-converter';\nimport { OTranslateService } from '../../../../services';\nimport { Util } from '../../../../utils';\nimport { OContextMenuComponent } from '../../../contextmenu/o-context-menu-components';\nimport { ColumnValueFilterOperator, IColumnValueFilter, OColumn, OTableComponent } from '../../table-components';\n\n\nexport const DEFAULT_TABLE_CONTEXT_MENU_INPUTS = [\n  'contextMenu: context-menu',\n  'showInsert: insert',\n  'showEdit: edit',\n  'showViewDetail: view-detail',\n  'showCopy: copy',\n  'showSelectAll: select-all',\n  'showRefresh: refresh',\n  'showDelete: delete',\n  'showFilter: filter'\n];\n\n@Component({\n  moduleId: module.id,\n  selector: 'o-table-context-menu',\n  template: `\n    <o-context-menu #defaultContextMenu>\n      <o-context-menu-item attr=\"refresh\" label=\"TABLE_CONTEXT_MENU.REFRESH\" svg-icon=\"ontimize:autorenew\" (execute)=\"refresh()\"\n        [visible]=\"isVisibleRefresh | async\"></o-context-menu-item>\n      <o-context-menu-item attr=\"detail\" icon=\"chevron_right\" label=\"TABLE_CONTEXT_MENU.VIEW_DETAIL\" (execute)=\"gotoDetails($event)\"\n        [visible]=\"isVisibleDetail | async\"></o-context-menu-item>\n      <o-context-menu-item attr=\"edit\" icon=\"edit\" label=\"TABLE_CONTEXT_MENU.EDIT\" (execute)=\"edit($event)\" [visible]=\"isVisibleEdit | async\">\n      </o-context-menu-item>\n      <o-context-menu-item attr=\"insert\" label=\"TABLE_CONTEXT_MENU.INSERT\" icon=\"add\" (execute)=\"add()\" [visible]=\"isVisibleInsert | async\">\n      </o-context-menu-item>\n      <o-context-menu-item attr=\"delete\" label=\"TABLE_CONTEXT_MENU.DELETE\" icon=\"delete\" (execute)=\"delete($event)\" [visible]=\"isVisibleDelete | async\">\n      </o-context-menu-item>\n      <!-- FILTER GROUP -->\n      <o-context-menu-group label=\"TABLE_CONTEXT_MENU.FILTER\" icon=\"filter_list\" type=\"group\" [visible]=\"isVisibleFilter | async\">\n        <o-context-menu-item icon=\"filter_list\" [label]=\"labelFilterByColumn\" (execute)=\"filterByColumn($event)\"></o-context-menu-item>\n        <o-context-menu-item icon=\"filter_list\" label=\"TABLE_CONTEXT_MENU.FILTER_BY_VALUE\" (execute)=\"filterByValue($event)\"></o-context-menu-item>\n      </o-context-menu-group>\n      <!-- COPY GROUP -->\n      <o-context-menu-separator [visible]=\"isVisibleCopy | async\"></o-context-menu-separator>\n      <o-context-menu-group label=\"TABLE_CONTEXT_MENU.COPY\" icon=\"file_copy\" type=\"group\" [visible]=\"isVisibleCopy | async\">\n        <o-context-menu-item icon=\"file_copy\" label=\"TABLE_CONTEXT_MENU.COPY_CELL\" (execute)=\"copyCell($event)\"></o-context-menu-item>\n        <o-context-menu-item icon=\"file_copy\" label=\"TABLE_CONTEXT_MENU.COPY_ROW\" (execute)=\"copyRow($event)\"></o-context-menu-item>\n        <o-context-menu-item label=\"TABLE_CONTEXT_MENU.COPY_ALL\" icon=\"file_copy\" (execute)=\"copyAll()\"></o-context-menu-item>\n        <o-context-menu-item label=\"TABLE_CONTEXT_MENU.COPY_SELECTION\" icon=\"file_copy\" (execute)=\"copySelection()\"></o-context-menu-item>\n      </o-context-menu-group>\n      <o-context-menu-separator [visible]=\"isVisibleSelectAll | async\"></o-context-menu-separator>\n      <o-context-menu-item attr=\"select-all\" [label]=\"table.isAllSelected() ? 'TABLE_CONTEXT_MENU.DESELECT_ALL': 'TABLE_CONTEXT_MENU.SELECT_ALL'\"\n        icon=\"select_all\" (execute)=\"table.isAllSelected() ? unSelectAll() : selectAll()\" [visible]=\"isVisibleSelectAll | async\"></o-context-menu-item>\n    </o-context-menu>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  inputs: DEFAULT_TABLE_CONTEXT_MENU_INPUTS\n})\nexport class OTableContextMenuComponent implements OnInit {\n\n  public contextMenu: OContextMenuComponent;\n  public isVisibleInsert: BehaviorSubject<boolean> = new BehaviorSubject(true);\n  public isVisibleEdit: BehaviorSubject<boolean> = new BehaviorSubject(true);\n  public isVisibleDetail: BehaviorSubject<boolean> = new BehaviorSubject(true);\n  public isVisibleCopy: BehaviorSubject<boolean> = new BehaviorSubject(true);\n  public isVisibleSelectAll: BehaviorSubject<boolean> = new BehaviorSubject(true);\n  public isVisibleRefresh: BehaviorSubject<boolean> = new BehaviorSubject(true);\n  public isVisibleDelete: BehaviorSubject<boolean> = new BehaviorSubject(true);\n  public isVisibleFilter: BehaviorSubject<boolean> = new BehaviorSubject(true);\n\n  set showInsert(value: boolean) {\n    if (typeof value !== 'boolean') {\n      value = Util.parseBoolean(value as any);\n    }\n    this.isVisibleInsert.next(value);\n  }\n  get showInsert(): boolean {\n    return this.isVisibleInsert.getValue();\n  }\n\n  set showEdit(value: boolean) {\n    if (typeof value !== 'boolean') {\n      value = Util.parseBoolean(value as any);\n    }\n    this.isVisibleEdit.next(value);\n  }\n  get showEdit(): boolean {\n    return this.isVisibleEdit.getValue();\n  }\n\n  set showViewDetail(value: boolean) {\n    if (typeof value !== 'boolean') {\n      value = Util.parseBoolean(value as any);\n    }\n    this.isVisibleDetail.next(value);\n  }\n  get showViewDetail(): boolean {\n    return this.isVisibleDetail.getValue();\n  }\n\n  set showCopy(value: boolean) {\n    if (typeof value !== 'boolean') {\n      value = Util.parseBoolean(value as any);\n    }\n    this.isVisibleCopy.next(value);\n  }\n  get showCopy(): boolean {\n    return this.isVisibleCopy.getValue();\n  }\n\n  @InputConverter()\n  set showSelectAll(value: boolean) {\n    if (typeof value !== 'boolean') {\n      value = Util.parseBoolean(value as any);\n    }\n    this.table.isSelectionModeNone() ? this.isVisibleSelectAll.next(false) : this.isVisibleSelectAll.next(value);\n  }\n  get showSelectAll(): boolean {\n    return this.isVisibleSelectAll.getValue();\n  }\n\n  set showRefresh(value: boolean) {\n    if (typeof value !== 'boolean') {\n      value = Util.parseBoolean(value as any);\n    }\n    this.isVisibleRefresh.next(value);\n  }\n  get showRefresh(): boolean {\n    return this.isVisibleRefresh.getValue();\n  }\n\n  set showDelete(value: boolean) {\n    if (typeof value !== 'boolean') {\n      value = Util.parseBoolean(value as any);\n    }\n    this.isVisibleDelete.next(value);\n  }\n  get showDelete(): boolean {\n    return this.isVisibleDelete.getValue();\n  }\n\n  set showFilter(value: boolean) {\n    if (typeof value !== 'boolean') {\n      value = Util.parseBoolean(value as any);\n    }\n    this.isVisibleFilter.next(value);\n  }\n  get showFilter(): boolean {\n    return this.isVisibleFilter.getValue();\n  }\n\n  @ViewChild('defaultContextMenu')\n  protected defaultContextMenu: OContextMenuComponent;\n  protected row: any;\n  protected column: OColumn;\n  protected translateService: OTranslateService;\n  protected contextMenuSubscription: Subscription = new Subscription();\n\n  constructor(\n    protected injector: Injector,\n    @Inject(forwardRef(() => OTableComponent)) public table: OTableComponent\n  ) {\n    this.translateService = this.injector.get(OTranslateService);\n  }\n\n  public ngOnInit(): void {\n    this.contextMenuSubscription.add(this.defaultContextMenu.onClose.subscribe((param: any) => {\n      if (!this.table.isSelectionModeMultiple()) {\n        this.table.clearSelection();\n      }\n    }));\n\n    this.contextMenuSubscription.add(this.defaultContextMenu.onShow.subscribe((param: any) => {\n      this.initProperties(param);\n    }));\n\n  }\n\n  public ngAfterViewInit(): void {\n    const itemsParsed = this.defaultContextMenu.oContextMenuItems.toArray();\n    if (this.contextMenu) {\n      const items = itemsParsed.concat(this.contextMenu.oContextMenuItems.toArray());\n      this.defaultContextMenu.oContextMenuItems.reset(items);\n    } else {\n      this.defaultContextMenu.oContextMenuItems.reset(itemsParsed);\n    }\n    if (!Util.isDefined(this.showSelectAll)) {\n      this.isVisibleSelectAll.next(this.table.selectAllCheckbox);\n    }\n    this.table.registerContextMenu(this.defaultContextMenu);\n  }\n\n  public gotoDetails(event): void {\n    const data = event.data.rowValue;\n    this.table.viewDetail(data);\n  }\n\n  public edit(event): void {\n    const data = event.data.rowValue;\n    this.table.doHandleClick(data);\n  }\n\n  public add(): void {\n    this.table.add();\n  }\n\n  public selectAll(): void {\n    this.table.showAndSelectAllCheckbox();\n  }\n\n  public unSelectAll(): void {\n    this.table.selection.clear();\n  }\n\n  public copyAll(): void {\n    this.table.copyAll();\n  }\n\n  public copyCell(event): void {\n    const cell_data = this.defaultContextMenu.origin.innerText;\n    Util.copyToClipboard(cell_data);\n  }\n\n  public copySelection(): void {\n    this.table.copySelection();\n  }\n\n  public copyRow(event): void {\n    const data = JSON.stringify(this.table.dataSource.getRenderedData([event.data.rowValue]));\n    Util.copyToClipboard(data);\n  }\n\n  public delete(event): void {\n    this.table.remove();\n  }\n\n  public refresh(): void {\n    this.table.refresh();\n  }\n\n  public filterByValue(event): void {\n    this.table.showFilterByColumnIcon = true;\n    const columValueFilter: IColumnValueFilter = {\n      attr: this.column.attr,\n      operator: ColumnValueFilterOperator.IN,\n      values: [this.row[this.column.attr]]\n    };\n    this.table.dataSource.addColumnFilter(columValueFilter);\n    this.table.reloadPaginatedDataFromStart();\n  }\n\n  get labelFilterByColumn(): string {\n    return (this.column && this.column.attr) ? this.translateService.get('TABLE_CONTEXT_MENU.FILTER_BY') + ' ' + this.translateService.get(this.column.attr) : '';\n  }\n\n  public filterByColumn(event): void {\n    if (this.table.oTableMenu) {\n      this.table.showFilterByColumnIcon = true;\n      this.table.oTableMenu.columnFilterOption.active = true;\n      this.table.openColumnFilterDialog(this.column, event.event);\n    }\n  }\n\n  public checkVisibleFilter(): void {\n    let isVisible = false;\n    if (this.column) {\n      isVisible = this.showFilter && this.table.isColumnFilterable(this.column);\n    }\n    this.isVisibleFilter.next(isVisible);\n  }\n\n  protected initProperties(param: any): void {\n    const data = param.data;\n    if (data) {\n      const columnName = data.cellName;\n      this.column = this.table.getOColumn(columnName);\n      this.row = data.rowValue;\n      this.checkVisibleFilter();\n    }\n  }\n\n}\n"]}