{"version":3,"file":"o-table-cell-editor-integer.component.js","sourceRoot":"","sources":["../../../../../../../tmp/ontimize/components/table/column/cell-editor/integer/o-table-cell-editor-integer.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, Injector, ViewChild, TemplateRef, ChangeDetectionStrategy } from '@angular/core';\nimport { FormControl, ValidatorFn } from '@angular/forms';\n\nimport { InputConverter } from '../../../../../decorators';\nimport { OBaseTableCellEditor } from '../o-base-table-cell-editor.class';\n\nexport const DEFAULT_INPUTS_O_TABLE_CELL_EDITOR_INTEGER = [\n  ...OBaseTableCellEditor.DEFAULT_INPUTS_O_TABLE_CELL_EDITOR,\n  'min',\n  'max',\n  'step'\n];\n\nexport const DEFAULT_OUTPUTS_O_TABLE_CELL_EDITOR_INTEGER = [\n  ...OBaseTableCellEditor.DEFAULT_OUTPUTS_O_TABLE_CELL_EDITOR\n];\n\n@Component({\n  moduleId: module.id,\n  selector: 'o-table-cell-editor-integer',\n  template: `\n    <ng-template #templateref let-cellvalue=\"cellvalue\" let-rowvalue=\"rowvalue\">\n      <div [formGroup]=\"formGroup\">\n        <mat-form-field floatLabel=\"never\">\n          <input #input matInput type=\"number\" [placeholder]=\"getPlaceholder()\" [formControl]=\"formControl\"\n            [required]=\"orequired\" [min]=\"min\" [max]=\"max\" [step]=\"step\">\n          <mat-error *ngIf=\"hasError('required')\">{{ 'FORM_VALIDATION.REQUIRED' | oTranslate }}</mat-error>\n          <mat-error *ngIf=\"hasError('min')\">{{ 'FORM_VALIDATION.MIN_VALUE' | oTranslate }}:\n            {{ getErrorValue('min', 'requiredMin') }}</mat-error>\n          <mat-error *ngIf=\"hasError('max')\">{{ 'FORM_VALIDATION.MAX_VALUE' | oTranslate }}:\n            {{ getErrorValue('max', 'requiredMax') }}</mat-error>\n        </mat-form-field>\n      </div>\n    </ng-template>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  inputs: DEFAULT_INPUTS_O_TABLE_CELL_EDITOR_INTEGER,\n  outputs: DEFAULT_OUTPUTS_O_TABLE_CELL_EDITOR_INTEGER\n})\n\nexport class OTableCellEditorIntegerComponent extends OBaseTableCellEditor {\n\n  public static DEFAULT_INPUTS_O_TABLE_CELL_EDITOR_INTEGER = DEFAULT_INPUTS_O_TABLE_CELL_EDITOR_INTEGER;\n  public static DEFAULT_OUTPUTS_O_TABLE_CELL_EDITOR_INTEGER = DEFAULT_OUTPUTS_O_TABLE_CELL_EDITOR_INTEGER;\n\n  @ViewChild('templateref', { read: TemplateRef }) public templateref: TemplateRef<any>;\n\n  @InputConverter()\n  min: number;\n  @InputConverter()\n  max: number;\n  @InputConverter()\n  step: number = 1;\n\n  constructor(protected injector: Injector) {\n    super(injector);\n  }\n\n  getCellData() {\n    let cellData = super.getCellData();\n    let intValue = parseInt(cellData);\n    return isNaN(intValue) ? undefined : intValue;\n  }\n\n  resolveValidators(): ValidatorFn[] {\n    let validators: ValidatorFn[] = super.resolveValidators();\n    if (typeof (this.min) !== 'undefined') {\n      validators.push(this.minValidator.bind(this));\n    }\n    if (typeof (this.max) !== 'undefined') {\n      validators.push(this.maxValidator.bind(this));\n    }\n    return validators;\n  }\n\n  protected minValidator(control: FormControl) {\n    if ((typeof (control.value) === 'number') && (control.value < this.min)) {\n      return {\n        'min': {\n          'requiredMin': this.min\n        }\n      };\n    }\n    return {};\n  }\n\n  protected maxValidator(control: FormControl) {\n    if ((typeof (control.value) === 'number') && (this.max < control.value)) {\n      return {\n        'max': {\n          'requiredMax': this.max\n        }\n      };\n    }\n    return {};\n  }\n}\n"]}