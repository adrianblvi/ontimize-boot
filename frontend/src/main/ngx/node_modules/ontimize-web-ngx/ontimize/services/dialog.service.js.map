{"version":3,"file":"dialog.service.js","sourceRoot":"","sources":["../../../tmp/ontimize/services/dialog.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable, Injector } from '@angular/core';\nimport { MatDialog, MatDialogConfig, MatDialogRef } from '@angular/material';\nimport { Observable } from 'rxjs';\nimport { ODialogComponent, ODialogConfig } from '../components';\n\n@Injectable()\nexport class DialogService {\n\n  protected ng2Dialog: MatDialog;\n  dialogRef: MatDialogRef<ODialogComponent>;\n\n  constructor(protected injector: Injector) {\n    this.ng2Dialog = this.injector.get(MatDialog);\n  }\n\n  public get dialog(): ODialogComponent {\n    if (this.dialogRef) {\n      return this.dialogRef.componentInstance;\n    }\n    return undefined;\n  }\n\n  public alert(title: string, message: string, config?: ODialogConfig): Promise<any> {\n    var self = this;\n    let observable = Observable.create(\n      observer => {\n        self.openDialog(observer);\n        self.dialogRef.componentInstance.alert(title, message, config);\n      }\n    );\n    return observable.toPromise();\n  }\n\n  public info(title: string, message: string, config?: ODialogConfig): Promise<any> {\n    var self = this;\n    let observable = Observable.create(\n      observer => {\n        self.openDialog(observer);\n        self.dialogRef.componentInstance.info(title, message, config);\n      }\n    );\n    return observable.toPromise();\n  }\n\n  public warn(title: string, message: string, config?: ODialogConfig): Promise<any> {\n    var self = this;\n    let observable = Observable.create(\n      observer => {\n        self.openDialog(observer);\n        self.dialogRef.componentInstance.warn(title, message, config);\n      }\n    );\n    return observable.toPromise();\n  }\n\n  public error(title: string, message: string, config?: ODialogConfig): Promise<any> {\n    var self = this;\n    let observable = Observable.create(\n      observer => {\n        self.openDialog(observer);\n        self.dialogRef.componentInstance.error(title, message, config);\n      }\n    );\n    return observable.toPromise();\n  }\n\n  public confirm(title: string, message: string, config?: ODialogConfig): Promise<any> {\n    var self = this;\n    let observable = Observable.create(\n      observer => {\n        self.openDialog(observer);\n        self.dialogRef.componentInstance.confirm(title, message, config);\n      }\n    );\n    return observable.toPromise();\n  }\n\n  protected openDialog(observer) {\n    let cfg: MatDialogConfig = {\n      role: 'alertdialog',\n      disableClose: true,\n      panelClass: ['o-dialog-class', 'o-dialog-service']\n    };\n    this.dialogRef = this.ng2Dialog.open(ODialogComponent, cfg);\n    this.dialogRef.afterClosed().subscribe(result => {\n      result = result === undefined ? false : result;\n      observer.next(result);\n      observer.complete();\n      this.dialogRef = null;\n    });\n  }\n\n}\n"]}