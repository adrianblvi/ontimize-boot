{"version":3,"file":"order-by.pipe.js","sourceRoot":"","sources":["../../../tmp/ontimize/pipes/order-by.pipe.ts"],"names":[],"mappings":"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","sourcesContent":["\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({ name: 'orderBy', pure: false })\nexport class OrderByPipe implements PipeTransform {\n\n  static _orderByComparator(a: any, b: any): number {\n\n    if ((isNaN(parseFloat(a)) || !isFinite(a)) || (isNaN(parseFloat(b)) || !isFinite(b))) {\n      //Isn't a number so lowercase the string to properly compare\n      if (a.toLowerCase() < b.toLowerCase()) { return -1; }\n      if (a.toLowerCase() > b.toLowerCase()) { return 1; }\n    } else {\n      //Parse strings as numbers to compare properly\n      if (parseFloat(a) < parseFloat(b)) { return -1; }\n      if (parseFloat(a) > parseFloat(b)) { return 1; }\n    }\n\n    return 0; //equal each other\n  }\n\n  transform(input: any, [config = '+']): any {\n\n    if (!Array.isArray(input)) { return input; }\n\n    if (!Array.isArray(config) || (Array.isArray(config) && config.length === 1)) {\n      var propertyToCheck: string = !Array.isArray(config) ? config : config[0];\n      var desc = propertyToCheck.substr(0, 1) === '-';\n\n      //Basic array\n      if (!propertyToCheck || propertyToCheck === '-' || propertyToCheck === '+') {\n        return !desc ? input.sort() : input.sort().reverse();\n      } else {\n        var property: string = propertyToCheck.substr(0, 1) === '+' || propertyToCheck.substr(0, 1) === '-'\n          ? propertyToCheck.substr(1)\n          : propertyToCheck;\n\n        return input.sort(function (a: any, b: any) {\n          return !desc\n            ? OrderByPipe._orderByComparator(a[property], b[property])\n            : -OrderByPipe._orderByComparator(a[property], b[property]);\n        });\n      }\n    } else {\n      //Loop over property of the array in order and sort\n      return input.sort(function (a: any, b: any) {\n        for (var i: number = 0; i < config.length; i++) {\n          var desc = config[i].substr(0, 1) === '-';\n          var property = config[i].substr(0, 1) === '+' || config[i].substr(0, 1) === '-'\n            ? config[i].substr(1)\n            : config[i];\n\n          var comparison = !desc\n            ? OrderByPipe._orderByComparator(a[property], b[property])\n            : -OrderByPipe._orderByComparator(a[property], b[property]);\n\n          //Don't return 0 yet in case of needing to sort by next property\n          if (comparison = 0) { return comparison; }\n        }\n\n        return 0; //equal each other\n      });\n    }\n  }\n}\n\n"]}