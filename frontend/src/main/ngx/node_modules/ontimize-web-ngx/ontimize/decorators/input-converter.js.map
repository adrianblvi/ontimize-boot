{"version":3,"file":"input-converter.js","sourceRoot":"","sources":["../../../tmp/ontimize/decorators/input-converter.ts"],"names":[],"mappings":"AAAA,MAAM,0BAA0B,KAAU;IACxC,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;QACtE,OAAO,KAAK,CAAC;KACd;IACD,OAAO,KAAK,CAAC,QAAQ,EAAE,CAAC;AAC1B,CAAC;AAED,MAAM,2BAA2B,KAAU;IACzC,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;QACvE,OAAO,KAAK,CAAC;KACd;IACD,OAAO,KAAK,CAAC,QAAQ,EAAE,KAAK,MAAM,IAAI,KAAK,CAAC,QAAQ,EAAE,KAAK,KAAK,CAAC;AACnE,CAAC;AAED,MAAM,0BAA0B,KAAU;IACxC,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;QACtE,OAAO,KAAK,CAAC;KACd;IACD,OAAO,UAAU,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;AACtC,CAAC;AAED,MAAM,yBAAyB,SAAoB;IACjD,6BAA6B,MAAc,EAAE,GAAW;QACtD,IAAI,SAAS,KAAK,SAAS,EAAE;YAC3B,IAAI,QAAQ,GAAS,OAAQ,CAAC,WAAW,CAAC,aAAa,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC;YACtE,IAAI,QAAQ,KAAK,SAAS,IAAI,QAAQ,KAAK,IAAI,EAAE;gBAC/C,MAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;aAChE;YACD,IAAI,QAAQ,CAAC,IAAI,KAAK,QAAQ,EAAE;gBAC9B,SAAS,GAAG,eAAe,CAAC;aAC7B;iBAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,SAAS,EAAE;gBACtC,SAAS,GAAG,gBAAgB,CAAC;aAC9B;iBAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,QAAQ,EAAE;gBACrC,SAAS,GAAG,eAAe,CAAC;aAC7B;iBAAM;gBACL,MAAM,IAAI,KAAK,CAAC,qDAAqD,GAAG,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;aAC/F;SACF;QAED,IAAI,UAAU,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;QAC9D,IAAI,UAAU,EAAE;YACd,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE;gBACjC,GAAG,EAAE,UAAU,CAAC,GAAG;gBACnB,GAAG,EAAE,UAAA,QAAQ;oBACX,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACtC,CAAC;gBACD,UAAU,EAAE,IAAI;gBAChB,YAAY,EAAE,IAAI;aACnB,CAAC,CAAC;SACJ;aAAM;YACL,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE;gBACjC,GAAG,EAAE;oBACH,OAAO,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC;gBAC1B,CAAC;gBACD,GAAG,EAAE,UAAU,QAAQ;oBACrB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC;gBACzC,CAAC;gBACD,UAAU,EAAE,IAAI;gBAChB,YAAY,EAAE,IAAI;aACnB,CAAC,CAAC;SACJ;IACH,CAAC;IACD,OAAO,mBAAmB,CAAC;AAC7B,CAAC","sourcesContent":["export function StringConverter(value: any) {\n  if (value === null || value === undefined || typeof value === 'string') {\n    return value;\n  }\n  return value.toString();\n}\n\nexport function BooleanConverter(value: any) {\n  if (value === null || value === undefined || typeof value === 'boolean') {\n    return value;\n  }\n  return value.toString() === 'true' || value.toString() === 'yes';\n}\n\nexport function NumberConverter(value: any) {\n  if (value === null || value === undefined || typeof value === 'number') {\n    return value;\n  }\n  return parseFloat(value.toString());\n}\n\nexport function InputConverter(converter?: Function) {\n  function InputConverterInner(target: Object, key: string) {\n    if (converter === undefined) {\n      var metadata = (<any>Reflect).getMetadata('design:type', target, key);\n      if (metadata === undefined || metadata === null) {\n        throw new Error('The reflection metadata could not be found.');\n      }\n      if (metadata.name === 'String') {\n        converter = StringConverter;\n      } else if (metadata.name === 'Boolean') {\n        converter = BooleanConverter;\n      } else if (metadata.name === 'Number') {\n        converter = NumberConverter;\n      } else {\n        throw new Error('There is no converter for the given property type \"' + metadata.name + '\".');\n      }\n    }\n\n    var definition = Object.getOwnPropertyDescriptor(target, key);\n    if (definition) {\n      Object.defineProperty(target, key, {\n        get: definition.get,\n        set: newValue => {\n          definition.set(converter(newValue));\n        },\n        enumerable: true,\n        configurable: true\n      });\n    } else {\n      Object.defineProperty(target, key, {\n        get: function () {\n          return this['__' + key];\n        },\n        set: function (newValue) {\n          this['__' + key] = converter(newValue);\n        },\n        enumerable: true,\n        configurable: true\n      });\n    }\n  }\n  return InputConverterInner;\n}\n"]}